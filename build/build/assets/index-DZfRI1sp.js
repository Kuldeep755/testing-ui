var Ct=Object.defineProperty;var Rt=(l,e,t)=>e in l?Ct(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var V=(l,e,t)=>Rt(l,typeof e!="symbol"?e+"":e,t);import{j as i,B as E,r as w,I as Xe,L as Ze,P as Ke,a as Ie,u as kt,M as Je,T as Tt,b as Qe,d as Lt,e as et,f as At,h as Mt,R as Bt,C as It,D as Ft,i as Dt,A as Vt,k as zt,l as tt,m as st,n as W,o as it,p as Ot,q as z,s as S,t as le,v as _t,S as Ce,O as Ht,w as oe,x as I,y as qt,z as Fe,E as Wt,F as Ut,G as Gt,H as Yt,J as $t,K as H,N as Xt}from"./react-vendor-Fp0h7QT4.js";import{l as R,f as N,n as O,g as Zt,h as at,s as Kt,i as Jt,P as Y,j as Qt,b as es,m as Re,t as ke,H as X,k as se,o as De,p as ts}from"./vendor-DfJYBAzT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();const ss=({action:l,status:e,dueDate:t,assignedBy:s})=>i.jsxs("div",{className:"ux-action-item py-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx(E,{label:"Service Request",rounded:!0,outlined:!0,className:"size-xs"}),i.jsxs("span",{children:["Due: ",t]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{children:l}),i.jsx("span",{children:"Status: Waiting for Approval"})]}),i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{children:["From provider: ",s]}),i.jsx(E,{label:e,rounded:!0,className:"size-sm"})]})]}),is=({className:l,action:e=R.noop})=>i.jsx("div",{className:l,children:i.jsx("div",{className:"bg-gray-300 rounded-lg w-full lg:w-80 p-8",children:i.jsxs("div",{className:"text-center ",children:[i.jsxs("p",{className:"text-sm mb-4",children:["No widgets added.",i.jsx("br",{}),"Click 'Add icon' to configure your data."]}),i.jsx(E,{icon:"pi pi-plus",rounded:!0,onClick:e})]})})}),ne=({header:l,children:e,className:t,maximize:s=!1})=>i.jsxs("div",{className:N("bg-white rounded-lg shadow p-4",t),children:[i.jsxs("div",{className:"mb-2 flex items-center",children:[i.jsx("div",{className:"w-full",children:l}),s&&i.jsx(E,{severity:"secondary",size:"small",icon:"pi pi-arrow-up-right",rounded:!0,text:!0})]}),i.jsx("div",{className:"",children:e})]}),U=w.createContext(),as=({header:l,onToggle:e=O})=>{const{state:t,setState:s}=w.useContext(U),[a,o]=w.useState(!0),n=c=>{o(c.value),e(c)},r=()=>{s({...t,sidebarModal:!0})};return i.jsxs("div",{className:"w-full",children:[i.jsx("div",{className:"mb-4 md:hidden",children:i.jsx(E,{icon:"pi pi-bars",style:{width:"3rem"},onClick:r})}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-4",children:[i.jsx("h3",{className:"text-xl",children:l}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Xe,{checked:a,onChange:n}),i.jsxs("span",{className:"ml-2 text-sm",children:[a?"Expanded":"Collapsed"," View"]}),i.jsx("span",{className:"ml-4 text-sm",children:"12 Feb, 2025"})]})]})]})},ls=({items:l,value:e,onChange:t})=>i.jsx(Ze,{value:e,onChange:t,options:l,optionLabel:"name",itemTemplate:s=>i.jsxs("div",{className:"flex align-center",children:[i.jsx("div",{className:"rounded mr-2 bg-blue-400",children:i.jsx("div",{className:"w-10 h-10 flex justify-center items-center",children:i.jsx("i",{className:N(["text-white",s.icon])})})}),i.jsxs("div",{className:"flex flex-col pl-2",children:[i.jsx("span",{className:"text-sm",children:s.name}),i.jsx("span",{className:"text-xs",children:s.desc})]})]}),className:"ux-find-listbox",listStyle:{maxHeight:"250px"}}),os=({title:l,ref:e})=>{const t=String(Math.random()).slice(14,16);return i.jsx(Ke,{collapseIcon:Ie.ANGLE_DOWN,expandIcon:Ie.ANGLE_UP,ref:e,header:l,toggleable:!0,className:"ux-request-card",children:i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsxs("div",{className:"",children:[i.jsx("div",{className:"text-5xl font-semibold",children:t}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("p",{children:"No of request so far "}),i.jsx(E,{severity:"secondary",size:"small",icon:"pi pi-arrow-up-right",rounded:!0,text:!0})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx(E,{label:"Add",size:"small",rounded:!0})})]}),i.jsx("div",{className:"bg-white rounded p-2",children:i.jsxs("ul",{className:"list-none pl-0 px-2 text-sm",children:[i.jsx("li",{children:"00 - Request Resolved"}),i.jsx("li",{children:"00 - Request In-Progress"}),i.jsx("li",{children:"00 - Request Pending"})]})})]})})},ns=({items:l=[],header:e})=>i.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[i.jsx("h3",{className:"mb-2",children:e}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(t=>i.jsx(os,{title:t.value,ref:t.ref},t._id))})]}),rs=[{icon:"pi pi-home",key:"dashboard",label:"Dashboard",items:[{label:"Service",icon:"pi pi-cog",url:"#/dashboard/service"},{label:"Move Request",icon:"pi pi-arrows-alt",url:"#/dashboard/moverequest"},{label:"Service Plan",icon:"pi pi-arrows-alt",url:"#/dashboard/service-plan"},{label:"Job Plan",icon:"pi pi-arrows-alt",url:"#/dashboard/job-plan"},{label:"Buildings",icon:"pi pi-arrows-alt",url:"#/dashboard/building"}]},{icon:"pi pi-comments",key:"commentModal",label:"Comments"},{icon:"pi pi-list-check",key:"serveyModal",label:"Servery"},{icon:"pi pi-bell",key:"notifyModal",label:"Notifications"},{icon:"pi pi-user-plus",key:"persModal",label:"Personalization"},{icon:"pi pi-share-alt",label:"Share via",items:[{label:"Slack",icon:"pi pi-slack"},{label:"Whatsapp",icon:"pi pi-whatsapp"}]},{separator:!0},{icon:"pi pi-user",label:"User Settings",items:[{label:"Devika Lal",icon:"pi pi-slack"},{label:"Change Password",icon:"pi pi-key"},{label:"Logout",icon:"pi pi-sign-out",url:"#/login"}]}],cs=["Request Types","Action Items","Calendar","Find","Widget 5","Widget 6","Widget 7","Widget 8"],me=[{id:"1000",code:"f230fh0g3",name:"Bamboo Watch",description:"Product Description",image:"bamboo-watch.jpg",price:65,category:"Accessories",quantity:24,inventoryStatus:"INSTOCK",rating:5},{id:"1001",code:"nvklal433",name:"Black Watch",description:"Product Description",image:"black-watch.jpg",price:72,category:"Accessories",quantity:61,inventoryStatus:"INSTOCK",rating:4},{id:"1002",code:"zz21cz3c1",name:"Blue Band",description:"Product Description",image:"blue-band.jpg",price:79,category:"Fitness",quantity:2,inventoryStatus:"LOWSTOCK",rating:3},{id:"1003",code:"244wgerg2",name:"Blue T-Shirt",description:"Product Description",image:"blue-t-shirt.jpg",price:29,category:"Clothing",quantity:25,inventoryStatus:"INSTOCK",rating:5},{id:"1004",code:"h456wer53",name:"Bracelet",description:"Product Description",image:"bracelet.jpg",price:15,category:"Accessories",quantity:73,inventoryStatus:"INSTOCK",rating:4},{id:"1005",code:"av2231fwg",name:"Brown Purse",description:"Product Description",image:"brown-purse.jpg",price:120,category:"Accessories",quantity:0,inventoryStatus:"OUTOFSTOCK",rating:4},{id:"1006",code:"bib36pfvm",name:"Chakra Bracelet",description:"Product Description",image:"chakra-bracelet.jpg",price:32,category:"Accessories",quantity:5,inventoryStatus:"LOWSTOCK",rating:3},{id:"1007",code:"mbvjkgip5",name:"Galaxy Earrings",description:"Product Description",image:"galaxy-earrings.jpg",price:34,category:"Accessories",quantity:23,inventoryStatus:"INSTOCK",rating:5}],ge=[{id:"2001",Role:"Manager",Person:"John Doe","Work phone":"+1-555-1234",Fax:"+1-555-5678",Email:"john.doe@example.com","Primary Organization":"ABC Corp"},{id:"2002",Role:"Administrator",Person:"Jane Smith","Work phone":"+1-555-8765",Fax:"+1-555-4321",Email:"jane.smith@example.com","Primary Organization":"XYZ Ltd."},{id:"2003",Role:"Technician",Person:"Mike Johnson","Work phone":"+1-555-2468",Fax:"+1-555-1357",Email:"mike.johnson@example.com","Primary Organization":"Global Services"},{id:"2004",Role:"Sales Representative",Person:"Emily Davis","Work phone":"+1-555-9876",Fax:"+1-555-6543",Email:"emily.davis@example.com","Primary Organization":"Tech Solutions"},{id:"2005",Role:"Support Specialist",Person:"Robert Brown","Work phone":"+1-555-3698",Fax:"+1-555-2587",Email:"robert.brown@example.com","Primary Organization":"Enterprise Systems"},{id:"2006",Role:"Consultant",Person:"Laura Wilson","Work phone":"+1-555-1597",Fax:"+1-555-7532",Email:"laura.wilson@example.com","Primary Organization":"Innovate Inc."},{id:"2007",Role:"Project Manager",Person:"Daniel Martinez","Work phone":"+1-555-7539",Fax:"+1-555-1472",Email:"daniel.martinez@example.com","Primary Organization":"NextGen Consulting"},{id:"2008",Role:"Coordinator",Person:"Sophia Lee","Work phone":"+1-555-4682",Fax:"+1-555-3697",Email:"sophia.lee@example.com","Primary Organization":"Blue Ocean Strategy"}],Se=[{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1},{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1},{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1},{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1},{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1},{label:"Your request for Electrical & Lighting (100045-0) was received",date:"Today 10:30 am",read:!1}],ds=[{name:"Electrical & Lighting",key:"EL"},{name:"Required Equipment",key:"RE"},{name:"Exterior Services",key:"ES"},{name:"Fixture & Furniture",key:"FF"},{name:"General Repairs",key:"GR"},{name:"House Keeping",key:"HK"},{name:"Interior Services",key:"IS"},{name:"Plumbing & Leaks",key:"PL"},{name:"Security",key:"S"},{name:"Temperature",key:"T"},{name:"IT Services",key:"ITS"},{name:"Phone Services",key:"PS"}],hs=["1. How would you rate your overall experience with the QAWM UX app?","2. How easy is it to navigate the QAWM UX app?","3. How useful are the QAWM UX app features?","4. How satisfied are you with the appâ€™s performance?","5. How likely are you to recommend the QAWM UX app to others?"],ms=["Building","Floor","Space"].map((l,e)=>({label:l,type:"text",iconPos:"right",icon:"pi pi-search",placeholder:`Select ${l}`,className:`w-full lg:w-1/3 inline-block ${e%2===1?"lg:ml-8":""}`,modalHeader:`Select ${l} (20)`,modalDesc:`Select ${l} from the list`})),Ve={person:l=>({name:"Person",count:l,desc:`${l} People`,icon:"pi pi-user"}),room:l=>({name:"Room",count:l,desc:`${l} Location`,icon:"pi pi-home"})},ps=async l=>{const e=new FormData;e.append("QR-Code-1.jpeg",l,"QR-Code-1.jpeg");const t=await fetch("/html/en/default/common/companyFileUpload.jsp?action=upload&record=true",{method:"POST",headers:{Accept:"*/*","Cache-Control":"no-cache",Connection:"keep-alive",NDk2NGI2MjU5OWZh:"gJ8ofYx3CUEpCljPJSNIq81G0D10_yU6",tempSpecId:"6044067884546460211"},body:e});if(t.ok){const s=await t.text();console.log("Upload Successful:",s)}else console.error("Error uploading file:",t.status,t.statusText)},us=()=>{const{state:l,setState:e}=w.useContext(U),[t,s]=w.useState([]),[a,o]=w.useState([]),[n,r]=w.useState([]),c=Array.from({length:4}).map(()=>w.useRef(null)),d=f=>{t.forEach(p=>f.value?p.ref.current.expand():p.ref.current.collapse())},h=w.useRef(null),m=(f,p)=>()=>{e({...l,[f]:p})};kt(()=>{h.current&&(h.current.clear(),h.current.show(Array.from({length:3}).map((f,p)=>{const v=["info","error","warn","success"][Zt(3)],j=String(Math.random()).slice(4,10);return{severity:v,sticky:!0,summary:v,closable:!1,content:i.jsxs("div",{className:"w-full text-sm flex items-center justify-between",children:[i.jsxs("span",{children:["Space moving - Employee ID $",j]}),i.jsx(Tt,{value:"Tue 30"})]})}})))});const g=async()=>{const f=await appModel.getRecord("requestForType");s(f.data.map((p,v)=>({...p,ref:c[v]})))},u=async()=>{o((await appModel.getRecord("actionItemsReport")).data)},x=async()=>{const f=await appModel.getRecord("spaceRecord",null,null,!0),p=await appModel.getRecord("peopleRecords",{filters:[{name:"recordForm",operator:"in",value:["Employee","Consultant"]}]},null,!0),v=f.totalSize,j=p.totalSize;r([Ve.person(j),Ve.room(v)])};function y(){document.querySelector("#fileUpload").addEventListener("change",p=>{const v=p.target.files[0];v&&ps(v)})}return w.useEffect(()=>{g(),u(),x(),y()},[]),i.jsxs("div",{className:"p-4 lg:py-8 lg:px-12",children:[i.jsx(as,{header:"Good Moring, Json",onToggle:d}),i.jsx(ns,{items:t,header:"Request Types"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 md:grid-cols-5 lg:grid-cols-9 gap-4 mb-4",children:[i.jsx(ne,{maximize:!0,header:"Action items(6)",className:"md:col-span-3 lg:col-span-4",children:a.map(f=>w.createElement(ss,{...f,key:f._id}))}),i.jsxs("div",{className:"p-4 border",children:[i.jsx("h3",{children:"Uplaod image "}),i.jsx("input",{type:"file",id:"fileUpload"})]}),i.jsxs(ne,{maximize:!0,header:"Calendar",className:"md:col-span-3 lg:col-span-3 md:order-1 lg:order-0",children:[i.jsx("h3",{className:"text-gray-600 text-sm",children:"Upcoming Requests"}),i.jsx(Je,{ref:h,className:"ux-calendar-info"})]}),i.jsx(ne,{header:"Find",maximize:!0,className:"md:col-span-2  lg:col-span-2",children:i.jsx(ls,{items:n,onChange:m("findModal",!0)})}),i.jsx(is,{className:"md:col-span-2 order-2",action:m("persModal",!0)})]})]})},lt=({className:l="route-breadcrumb"})=>{const e=Qe(),t=c=>e(c.item.route),s={icon:"pi pi-home",route:"/login",command:t},a=location.hash.split(/\//).slice(1),o={moverequest:"Move Request"};let n="";const r=a.map(c=>({label:o[c]??at(c),route:n+="/"+c,command:t}));return i.jsx(Lt,{model:r,home:s,className:l})},gs=()=>i.jsxs("div",{className:"",children:[i.jsx(lt,{}),i.jsx("h1",{children:"Project Page"})]}),ze=({values:l=[],vertical:e=!1,template:t=O})=>i.jsx("div",{className:N("flex gap-4",{"flex-col":e}),type:"radio",children:l.map((s,a)=>i.jsxs("div",{className:"flex items-center",children:[t(s,a),i.jsx("label",{htmlFor:s.key,className:"text-sm text-gray-700 ml-2",children:s.name})]},a))}),Z=l=>{const{test:e,children:t}=l;return t.find(s=>s.props.type===e)},Oe=({id:l,name:e,type:t,value:s,label:a,vertical:o,placeholder:n,values:r=[],multiple:c=!1,dropdown:d=!1,filter:h=!1,onChange:m=O,completeFn:g=O})=>{const u=n??`${Kt(a)}...`,[x,y]=w.useState(s??[]),f=p=>{if(console.log("event ==  ",p,l,t),p.target.type==="radio"&&(p.target.id=l),t==="dropdown"||t==="multiselect")p.target.id=l;else if(p.target.type==="checkbox"){const v=p.checked?[...x,p.value]:x.filter(j=>j.key!==p.value.key);y(v),p.value=v,p.target.id=l}m(p)};return i.jsxs(Z,{test:t,children:[i.jsx(et,{type:"text",name:e,value:s,className:"p-0",onChange:m,placeholder:u}),i.jsx(At,{name:e,type:"password",value:s,className:"p-0 w-full",onChange:m,placeholder:u,feedback:!1,tabIndex:1,toggleMask:!0}),i.jsx(Mt,{name:e,type:"textarea",value:s,rows:5,cols:30,onChange:m,placeholder:u}),i.jsx(ze,{type:"radio",values:r,vertical:o,template:p=>i.jsx(Bt,{inputId:p.key,name:p.name??p.label,value:p,onChange:f,checked:(s==null?void 0:s.key)===p.key})}),i.jsx(ze,{type:"checkbox",values:r,vertical:o,template:p=>i.jsx(It,{inputId:p.key,value:p,name:p.name??p.label,onChange:f,checked:x.some(v=>v.key===p.key)})}),i.jsx(Ft,{name:e,type:"dropdown",value:s,onChange:f,options:r,optionLabel:"name",placeholder:u,className:"w-full",filter:h}),i.jsx(Dt,{name:e,type:"multiselect",value:s,onChange:m,options:r,optionLabel:"name",placeholder:u,maxSelectedLabels:3,className:"w-full"}),i.jsx(Vt,{name:e,value:s,type:"autocomplete",suggestions:r,completeMethod:g,virtualScrollerOptions:{itemSize:38},placeholder:u,onChange:m,dropdown:d,multiple:c,className:"w-full [&>*]:w-full",field:"label"}),i.jsx(zt,{type:"calendar",showIcon:!0,value:s,onChange:m})]})},k=({label:l,className:e="flex",iconPos:t="left",icon:s,...a})=>i.jsxs("div",{className:N("ux-form-control mb-4",e),children:[i.jsx("label",{htmlFor:l,className:"text-black mb-2",children:l}),i.jsx("div",{className:"flex-1 [&>*]:w-full",children:s?i.jsxs(tt,{iconPosition:t,children:[i.jsx(st,{className:`pi pi-${s}`}),i.jsx(Oe,{...a})]}):i.jsx(Oe,{...a})})]}),fs=({header:l,description:e,children:t,className:s})=>i.jsxs("div",{className:N("w-full",s),children:[i.jsx("h3",{className:"mb-2",children:l}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:e}),t]}),A=({formSchema:l=[],onChange:e=O,classNameFn:t=O})=>i.jsx(i.Fragment,{children:l.map((s,a,o)=>i.jsx(fs,{className:t(a,a===o.length-1),header:s.header,description:s.description,children:s.controls.map(n=>w.createElement(k,{...n,key:n.id,onChange:e}))},a))}),pe=({header:l,description:e})=>i.jsxs("div",{className:"text-gray-700",children:[i.jsx("h3",{children:l}),i.jsx("p",{className:"text-xs text-gray-400 font-normal",children:e})]}),xs=({header:l,onToggle:e=O})=>i.jsxs("div",{className:"flex items-center justify-between text-xl",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:"pi pi-cog mr-2",style:{fontSize:"var(--text-2xl)"}}),i.jsx("h3",{children:l})]}),i.jsx(E,{icon:"pi pi-angle-right",className:"ux-card-toggle",onClick:e,rounded:!0,outlined:!0})]}),ys=({header:l,visible:e,onHide:t=R.noop})=>{const s=[{status:"Issue Raised",date:"15/10/2020 10:30",icon:"pi pi-shopping-cart",color:"#9C27B0",desc:"Raised by Mark: (Business User)"},{status:"In Progress",date:"15/10/2020 14:00",icon:"pi pi-cog",color:"#673AB7",desc:"by Kevin Karun: (Service Manager)"},{status:"Approved",date:"15/10/2020 16:15",icon:"pi pi-shopping-cart",color:"#FF9800",desc:"by Vector: (Service Technician)"}];return i.jsxs(W,{header:l,position:"right",visible:e,className:"ux-timeline-modal",onHide:t,draggable:!1,resizable:!1,children:[i.jsx("div",{className:"border-b border-gray-200 mb-4"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Request classification"}),i.jsx("p",{className:"text-xs font-semibold",children:"Electrical outlets out"})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Request for"}),i.jsx("p",{className:"text-xs font-semibold",children:"Steve Smith"})]}),i.jsx("div",{className:"text-sm",children:i.jsx(it,{value:"Request Issued - Pending",severity:"success"})})]}),i.jsx("div",{className:"border-b border-gray-200 my-2"}),i.jsx("div",{className:"p-8",children:i.jsx(Ot,{className:"ux-timeline",value:s,marker:a=>i.jsx("span",{className:"text-white w-10 h-10 rounded-full flex justify-center items-center",style:{backgroundColor:a.color},children:i.jsx("i",{className:a.icon})}),content:a=>i.jsxs("div",{className:"rounded-xl bg-gray-200 px-4 py-3 mb-8",children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("h3",{className:"font-semibold text-sm",children:a.status}),i.jsx("span",{className:"text-xs",children:a.date})]}),i.jsx("p",{className:"text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit."})]})})})]})},ws=({description:l})=>i.jsx("div",{className:"bg-gray-200 rounded-xl",children:i.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center h-32",children:[i.jsx("i",{className:"pi pi-info-circle",style:{fontSize:"var(--text-2xl)"}}),i.jsx("p",{className:"text-sm",children:l})]})}),Ee=()=>Math.random().toString(32).slice(2),ot=(l,e=noop)=>{for(let t of l)t.command=e,t.key=t.key??Jt(t.label),t.items&&ot(t.items,e);return l},ce=l=>{for(let e of l){e.id=e.id??Ee();for(let t of e.controls??[])t.id=t.id??Ee()}return l},we=(l,e,t)=>{for(let s of l)for(let a of s.controls??[])a.id===e&&(a.value=t);return[...l]},be=(l,e)=>{for(let t of l){if(t.id===e)return t;if(t.controls){let s=be(t.controls,e);if(s!==null)return s}}return null},bs=({header:l,visible:e,onHide:t=R.noop})=>{const[s,a]=w.useState(null),[o,n]=w.useState(null),r=[{name:"Business User",code:"BU"},{name:"Service Manager",code:"SM"},{name:"Move Manager",code:"MM"}],c=Array.from({length:1e5}).map((m,g)=>({label:`Item #${g}`,roles:[...r],role:null,value:g,id:Ee()})),d=m=>{let g=m.query;const u=x=>x.label.toLowerCase().indexOf(g.toLowerCase())===0;n(c.filter(u))},h=(m,g)=>{a(s.map(u=>(u.id===g.id&&(u.role=m.value),u)))};return i.jsxs(W,{header:l,position:"right",visible:e,className:"h-screen w-full max-w-[40rem]",onHide:t,draggable:!1,resizable:!1,footer:()=>i.jsx("div",{className:"flex justify-end",children:i.jsx(E,{label:"Add Contacts",rounded:!0})}),children:[i.jsx("div",{className:"border-b border-gray-200 mb-4"}),i.jsx(k,{multiple:!0,dropdown:!0,type:"autocomplete",label:"Add Contacts",value:s,suggestions:o,completeFn:d,placeholder:"Select employee name",onChange:m=>a(m.value)}),i.jsxs("div",{className:"mt-10",children:[i.jsx("label",{htmlFor:"assignRole",className:"mb-2 block",children:"Assign Role"}),s?i.jsxs(z,{value:s,size:"small",children:[i.jsx(S,{field:"label",header:"Employee Name"}),i.jsx(S,{header:"Assign Role",body:m=>i.jsx(k,{type:"dropdown",value:m.role,values:m.roles,placeholder:"Select role",onChange:g=>h(g,m)})})]}):i.jsx(ws,{description:"No employee is added. Yet to assign the role"})]})]})},vs=({header:l,description:e,cancelLabel:t,submitLabel:s,onCancel:a=R.noop,onSubmit:o=R.noop})=>i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center border-b border-gray-200 pb-2",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("h3",{className:"mb-2 font-semibold",children:l}),i.jsxs("div",{className:"text-gray-500",children:[i.jsx("i",{className:"pi pi-check-circle mr-2"}),i.jsx("span",{children:e})]})]}),i.jsxs("div",{className:"mb-2 flex gap-2 md:gap-4",children:[i.jsx(E,{label:t,rounded:!0,outlined:!0,className:"size-sm",onClick:a}),i.jsx(E,{label:s,rounded:!0,className:"size-sm",onClick:o})]})]}),Ss=({header:l,description:e,children:t})=>{const{state:s,setState:a}=w.useContext(U),o=(n,r)=>()=>{a({...s,[n]:r})};return i.jsx(ne,{className:"px-8 py-6 flex-1 text-gray-600",header:i.jsx(vs,{header:l,description:e,cancelLabel:"Cancel Request",submitLabel:"Submit Request",onCancel:o("submitReqModal",!1),onSubmit:o("submitReqModal",!0)}),children:i.jsxs("div",{className:"flex flex-col md:flex-row",children:[i.jsx("div",{className:"flex-1 md:pr-8",children:t}),i.jsx("div",{className:"w-full md:w-20 bg-gray-100 rounded-lg",children:i.jsx("div",{className:"flex md:justify-center",children:i.jsxs("span",{className:"flex flex-col gap-2 items-center md:py-6 p-2",children:[i.jsx(E,{icon:"pi pi-comments",onClick:o("contactModal",!0)}),i.jsx("p",{className:"text-xs text-center",children:"Add Comments"})]})})})]})})},ue=({header:l,children:e,Menu:t,onMenuSelect:s})=>{const{state:a,setState:o}=w.useContext(U),[n,r]=w.useState(null),c=(d,h)=>()=>{o({...a,[d]:h})};return i.jsxs("div",{className:"px-4 py-4 md:px-8",children:[i.jsxs("div",{className:"flex",children:[i.jsx("span",{className:"md:hidden",children:i.jsx(E,{icon:"pi pi-bars",style:{width:"3rem"},onClick:c("sidebarModal",!0)})}),i.jsx(lt,{})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-4",children:[i.jsx(ne,{className:"md:w-80",header:i.jsx(xs,{header:"Services",onToggle:console.log}),children:i.jsx(k,{type:"radio",vertical:!0,value:n,values:t||ds,onChange:d=>{r(d.value),s(d.value.key)}})}),i.jsx(Ss,{header:l,description:"Your form will be autosaved",children:e})]}),i.jsx(ys,{visible:a.submitReqModal,onHide:c("submitReqModal",!1),header:i.jsx(pe,{header:"Request ID: 100012",description:"Created on: 1/14/2025"})}),i.jsx(bs,{visible:a.contactModal,onHide:c("contactModal",!1),header:"Add Contacts & Assign Roles"})]})},nt=l=>{let{className:e,...t}=l;const s=Qt({TriFloorPlanSkeleton:!0,[e]:e});return le.createElement("div",es({className:s},t))};nt.propTypes={className:Y.string};let Es={instanceId:-1,tririgaUrl:location.origin,contextPath:"/",modelAndView:"triWorkTask",appExposedName:"workTask",sso:!0};function B(){return Es}const F="/p/floorplans",Ps="recordId",rt="drawingId",js="labelId",Ns="/attachedIds",Cs=`${F}/spaceCenterPoints`,Rs=`${F}/upload`,ks=`${F}/drawings`,Ts=`${F}/details`,Ls="/layers",As=`${F}/graphicReport`,Ms=`${F}/svglegend`,Bs="/layers",Is=`${F}/labellayers`,_e=new Map,ct=new Map,dt=new Map,ht=new Map,mt=new Map,Fs="SOURCE_ATTACHED_IDS",Ds="SOURCE_CENTER_POINTS",Vs="SOURCE_DRAWING_ATTRIBUTES",zs="SOURCE_DRAWING_DELETE",Os="SOURCE_LABEL_LAYER",_s="SOURCE_DRAWING_LIST",Hs="SOURCE_FLOORPLAN",qs="SOURCE_FLOORPLAN_ID",Ws="SOURCE_GRAPHIC_REPORTS",Us="SOURCE_LAYER",Gs="SOURCE_LAYERS",Ys="SOURCE_LOAD_DXF",$s="SOURCE_SVG_LEGEND";function Xs(l,e){ct.set(l,e)}async function Zs(l){if(!l)return null;let e=_e.get(l);if(e!==void 0)return e;const t=new URL(`${B().tririgaUrl}${F}`);t.searchParams.set(Ps,l);const s=await fetch(new Request(t),{credentials:"include"});if(!s.ok)throw s.source=qs,s;return e=(await s.json()).drawingId,_e.set(l,e),e}async function Ks(l){if(!l)return null;let e=ct.get(l);if(e!==void 0)return e;const t=`${B().tririgaUrl}${F}/${l}`,s=await fetch(new Request(t),{credentials:"include"});if(!s.ok)throw s.source=Hs,s;return e=await s.text(),Xs(l,e),e}async function Js(l){let e=`${B().tririgaUrl}${Rs}`;return e+=`?path=${encodeURIComponent(l.name)}`,await fetch(e,{method:"PUT",headers:{Accept:"application/json"},credentials:"include",body:l}).then(s=>{if(s.redirected){location.href=s.url;return}if(!s.ok)throw s.source=Ys,s;return s.text()}).then(s=>{try{return JSON.parse(s)}catch(a){throw{message:a.message,body:s}}}).catch(s=>{throw s})}async function Qs(l){const e=`${B().tririgaUrl}${ks}`;let t="";return l&&(t=JSON.stringify(l)),await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:t}).then(a=>{if(a.redirected){location.href=a.url;return}if(!a.ok)throw a.source=_s,a;return a.text()}).then(a=>{try{return JSON.parse(a)}catch(o){throw{message:o.message,body:a,cause:response}}})}async function ei(l){let e=`${B().tririgaUrl}${Ts}/`;return e+=l,await fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then(s=>{if(s.redirected){location.href=s.url;return}if(!s.ok)throw s.source=Vs,s;return s.text()}).then(s=>{try{return JSON.parse(s)}catch(a){throw{message:a.message,body:s,cause:response}}}).catch(s=>{throw s})}async function ti(l){if(!l)return null;let e=mt.get(l);if(e!==void 0)return e;const t=`${B().tririgaUrl}${F}/${l}${Ls}`;return e=await fetch(t,{headers:{Accept:"application/json"},credentials:"include"}).then(s=>{if(s.redirected){location.href=s.url;return}if(!s.ok)throw s.source=Gs,s;return s.text()}).then(s=>{try{return JSON.parse(s)}catch(a){throw{message:a.message,body:s,cause:response}}}).catch(s=>{throw s}),li(l,e),e}async function si(l){if(!l)return null;const e=`${B().tririgaUrl}${F}/${l}${Ns}`;return await fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then(s=>{if(s.redirected){location.href=s.url;return}if(!s.ok)throw s.source=Fs,s;return s.text()}).then(s=>{try{return JSON.parse(s)}catch(a){throw{message:a.message,body:s,cause:response}}}).catch(s=>{throw s})}async function ii(l,e){if(!l||!e)return null;const t=`${B().tririgaUrl}${As}/${l}/${e}`;return await fetch(t,{headers:{Accept:"application/json"},credentials:"include"}).then(a=>{if(a.redirected){location.href=a.url;return}if(!a.ok)throw a.source=Ws,a;return a.text()}).then(a=>{try{return JSON.parse(a)}catch(o){throw{message:o.message,body:a,cause:response}}}).catch(a=>{throw a})}async function ai(l){if(!l||!l.drawingId||!l.reportId||l.reportId===0)return null;const e=`${B().tririgaUrl}${Ms}`;return await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}).then(s=>{if(s.redirected){location.href=s.url;return}if(!s.ok)throw s.source=$s,s;return s.text()}).then(s=>{try{return s}catch(a){throw{message:a.message,body:s,cause:response}}}).catch(s=>{throw s})}function li(l,e){mt.set(l,e)}async function oi(l,e){if(!l||!e)return null;const t=`${B().tririgaUrl}${F}/${l}${Bs}/${e}`;return await fetch(t,{headers:{Accept:"application/json"},credentials:"include"}).then(a=>{if(a.redirected){location.href=a.url;return}if(!a.ok)throw a.source=Us,a;return a.text()}).catch(a=>{throw a})}async function ni(l){let e=`${B().tririgaUrl}${F}/`;e+=l,await fetch(e,{method:"DELETE",headers:{Accept:"application/json"},credentials:"include"}).then(t=>{if(t.redirected){location.href=t.url;return}if(!t.ok)throw t.source=zs,t})}function ri(l,e){dt.set(l,e)}async function ci(l){if(!l)return null;let e=dt.get(l);return e!==void 0||(e=di(l),ri(l,e)),e}async function di(l){const e=new URL(`${B().tririgaUrl}${Cs}`);e.searchParams.set(rt,l);const t=await fetch(new Request(e),{credentials:"include"});if(!t.ok)throw t.source=Ds,t;let s=await t.json();s=s??[];const a={};for(let o=0;o<s.length;o+=1)a[s[o].recordId]=s[o];return a}async function hi(l,e){if(!l||!e)return null;let t=ht.get(""+l+e);if(t!==void 0)return t;const s=new URL(`${B().tririgaUrl}${Is}`);s.searchParams.set(rt,l),s.searchParams.set(js,e);const a=await fetch(new Request(s),{credentials:"include"});if(!a.ok)throw a.source=Os,new Error("Request to get the floor plan labels layer failed",{cause:a});return t=await a.text(),mi(""+l+e,t),t}function mi(l,e){ht.set(l,e)}const ie={getAttacheIdsAndLabels:si,getGraphicReport:ii,getFloorplanId:Zs,getFloorplan:Ks,uploadDXFFile:Js,queryDrawings:Qs,getDrawingAttributes:ei,getLayers:ti,getLayer:oi,getSVGLegend:ai,deleteDrawing:ni,getCenterPoints:ci,getLabelsLayer:hi};function pi(l){const e={height:0,width:0,x:0,y:0};if(l)try{return l.getBBox()}catch{return e}return e}function ui(l,e,t,s,a){l&&l.setAttribute("viewBox",`${e} ${t} ${s} ${a}`)}function gi(l,e){return l===e||(l==null?void 0:l.scaleX)===(e==null?void 0:e.scaleX)&&(l==null?void 0:l.scaleY)===(e==null?void 0:e.scaleY)&&(l==null?void 0:l.x)===(e==null?void 0:e.x)&&(l==null?void 0:l.y)===(e==null?void 0:e.y)}function fi(l,e){return{scaleX:l.width!==0?e.width/l.width:0,scaleY:l.height!==0?e.height/l.height:0,x:l.x,y:l.y}}function xi(l,e,t){return{x:t.x,y:t.y,scaleX:e.width*t.scaleX/l.width,scaleY:e.height*t.scaleY/l.height}}function yi(l,e){if(!l)return-1;const t=l.getScreenCTM(),s=t?t.a:"1";return e===s||l.querySelectorAll("g [stroke-width]").forEach(a=>{let o=1;a.hasAttribute("sf")&&(o=parseFloat(a.getAttribute("sf")));const r=1/o/s;a.setAttribute("stroke-width",r)}),s}function wi(l,e){if(l===null)return null;const t=new Map;if(e){let s;if(Array.from(l.children).forEach(a=>{a.tagName==="g"&&a.id===e&&(s=a)}),!s)return t;Array.from(s.children).forEach(a=>{const o=a.getAttribute("tri-element-name");o&&o.length>0&&t.set(o,a)})}else l.querySelectorAll("[tri-record-id].tri-attached").forEach(s=>{const a=s.getAttribute("tri-record-id");a&&a.length>0&&pt(t,a,s)});return t}function bi(l,e){if(l===null)return null;const t=new Map;if(e){let s;if(Array.from(l.children).forEach(a=>{a.tagName==="g"&&a.id===e&&(s=a)}),!s)return t;Array.from(s.children).forEach(a=>{const o=a.getAttribute("tri-element-name");o&&o.length>0&&t.set(o,a)})}else l.querySelectorAll("[tri-record-id].tri-interactive").forEach(s=>{const a=s.getAttribute("tri-record-id");pt(t,a,s)});return t}function pt(l,e,t){const s=l.get(e);if(s){const a=s.getBBox(),o=t.getBBox(),n=a.height*a.width;o.height*o.width>n&&l.set(e,t)}else l.set(e,t)}function ut(l,e,t,s){const a=s.createSVGPoint().matrixTransform(t);let o=s.createSVGPoint();return o.x=l,o.y=e,o=o.matrixTransform(t),{x:o.x-a.x,y:o.y-a.y}}function gt(l,e,t){const s=t.getScreenCTM(),a=t.createSVGPoint();return a.x=l,a.y=e,a.matrixTransform(s.inverse())}function ft(l,e,t,s){const a=t-l,o=s-e;return Math.sqrt(a*a+o*o)}function vi(l){return ft(l[0].clientX,l[0].clientY,l[1].clientX,l[1].clientY)}function xt(l,e,t,s,a){const o={adjustedScaleX:l,adjustedScaleY:e},n=(c,d)=>{if(c>d){const h=d/c;o.adjustedScaleX*=h,o.adjustedScaleY*=h}},r=(c,d)=>{if(c<d){const h=d/c;o.adjustedScaleX*=h,o.adjustedScaleY*=h}};return r(o.adjustedScaleX,a.scaleX*t),r(o.adjustedScaleY,a.scaleY*t),n(o.adjustedScaleX,a.scaleX*s),n(o.adjustedScaleY,a.scaleY*s),o}function Si(l,e,t,s,a){const o=ut(-t,-s,a.matrix,l);return{...e,x:a.orig.x+o.x,y:a.orig.y+o.y}}function Ei(l,e,t,s,a,o,n,r,c){const{adjustedScaleX:d,adjustedScaleY:h}=xt(n,r,a,o,t);if(d===l.scaleX&&h===l.scaleY)return null;let m,g;if(c!=null){const u=gt(c.x,c.y,e),x={x:u.x-l.x,y:u.y-l.y},y={x:x.x*l.scaleX,y:x.y*l.scaleY},f={x:x.x*d,y:x.y*h},p={x:f.x-y.x,y:f.y-y.y},v={x:p.x/d,y:p.y/h};m=l.x+v.x,g=l.y+v.y}else m=l.x-(s.width/d-s.width/l.scaleX)/2,g=l.y-(s.height/h-s.height/l.scaleY)/2;return{x:m,y:g,scaleX:d,scaleY:h}}const Pi={0:.01,1:.15},ji=2;function Ni(l,e){Array.from(e.getElementsByClassName(l)).forEach(t=>{Te(t,l)})}function Ci(l,e,t){const s=t.get(l);s&&yt(s,e)}function Ri(l,e,t){const s=t.get(l);s&&Te(s,e)}function yt(l,e){const t=l.getAttribute("class");l.setAttribute("class",t+" "+e)}function Te(l,e){let s=l.getAttribute("class").split(/\s/);s=s.filter(a=>a!==e),s.length!==0&&l.setAttribute("class",s.join(" "))}function ki(l,e){return l[e]||""}function Ti(l,e,t){if(t)return 1;const s=l.viewBox.baseVal.width/e.width,a=l.viewBox.baseVal.height/e.height;return s>a?s:a}function Li(l){let e=0,t=0,s=0,a,o,n,r,c;for(a=0,o=l.numberOfItems-1;a<l.numberOfItems;o=a,a++)r=l.getItem(o),c=l.getItem(a),n=r.x*c.y-c.x*r.y,s+=n,e+=(r.x+c.x)*n,t+=(r.y+c.y)*n;return s/=2,{x:e/(s*6),y:t/(s*6)}}function wt(l,e,t){!l||!e||(l.setAttribute(t,e),l.setAttribute("pin","true"),l.children.length>0&&Array.from(l.children).forEach(s=>{wt(s,e,t)}))}const b={getSvgExtents:pi,setSvgViewBox:ui,updateSvgStrokeWidths:yi,createInitialSvgViewBox:fi,createAttachedMap:wi,createInteractiveMap:bi,getNormalizedDelta:ut,getNormalizedPoint:gt,getLineDistance:ft,getMultiTouchDistance:vi,MOUSE_WHEEL_MODIFIER:Pi,MAX_MOUSE_WHEEL_SCALE_FACTOR:ji,adjustScale:xt,scaleSvgViewBox:Ei,panSvgViewBox:Si,clearAllClasses:Ni,addClass:Ci,removeClass:Ri,addClassSvg:yt,removeClassSvg:Te,getPropValue:ki,calcSvgScale:Ti,calculateSpaceCentroid:Li,setTriRecordIdOnPin:wt,isSvgViewBoxEquals:gi,computeCurrentSvgViewBoxScale:xi};class D{constructor(){this.handleDragStart=this.handleDragStart.bind(this),this.handleDragMove=this.handleDragMove.bind(this),this.isEnabled=!0,this.dragBoundingBox=null,this.props={triFloorPlan:null,floorPlanLoaded:!1,enabled:!0,svgViewBox:null},setTimeout(()=>this.pluginDidUpdate({}))}setProps(e){const t=this.props;this.props={...t,...e},this.pluginDidUpdate(t)}get id(){return this.props.id}get enabled(){return this.isEnabled}set enabled(e){this.isEnabled=e}pluginDidUpdate(e){}pluginDidRemove(){}floorPlanDidResize(){}floorPlanDidPanOrZoom(e){}makeDragBox(e,t){const s=document.createElement("div");return s.style.top=""+t+"px",s.style.left=""+e+"px",s.style.height="5px",s.style.width="5px",s.style.position="absolute",s.className="TriDragBox",s}handleDragStart(e){if(e.button!==0||this.dragBoundingBox!==null)return;e.preventDefault(),this.dragBoundingBox={offset:{x:e.screenX-e.offsetX,y:e.screenY-e.offsetY},start:{x:e.offsetX,y:e.offsetY},current:{x:0,y:0}};const{triFloorPlan:t}=this.props,{svgElement:s}=t,a=s.parentElement;this.dragBox=this.makeDragBox(e.offsetX,e.offsetY),a.appendChild(this.dragBox)}handleDragMove(e){e.preventDefault();const{triFloorPlan:t}=this.props,{svgElement:s}=t,a=s.parentElement;if(!this.dragBox||!this.dragBoundingBox)return;this.dragBoundingBox.current.x=e.screenX-this.dragBoundingBox.offset.x,this.dragBoundingBox.current.y=e.screenY-this.dragBoundingBox.offset.y;let o=this.dragBoundingBox.current.x;o<1&&(o=1),o>a.offsetWidth-1&&(o=a.offsetWidth-1);let n=this.dragBoundingBox.current.y;n<1&&(n=1),n>a.offsetHeight-1&&(n=a.offsetHeight-1);var r,c,d,h;c=o>this.dragBoundingBox.start.x?this.dragBoundingBox.start.x:o,h=Math.abs(o-this.dragBoundingBox.start.x),this.dragBox.style.left=""+c+"px",this.dragBox.style.width=""+h+"px",r=n>this.dragBoundingBox.start.y?this.dragBoundingBox.start.y:n,d=Math.abs(n-this.dragBoundingBox.start.y),this.dragBox.style.top=""+r+"px",this.dragBox.style.height=""+d+"px"}zoomToBox(e,t,s,a){const{triFloorPlan:o}=this.props,{svgViewBox:n,svgViewPort:r}=o;let c=r.width/s,d=r.height/a;const h=n.scaleY/n.scaleX,m=r.height*n.scaleY,g=r.height*n.scaleX,u=m/g,x=a/s;if(u<x){const f=d/h,p=Math.round(s/f*c);e=e+s/2-p/2,c=f}else{const f=c*h,p=Math.round(a/f*d);t=t+a/2-p/2,d=f}const y={scaleX:c,scaleY:d,x:e,y:t};o.svgViewBox=y}}D.SPACE_ID="spaceId";D.EMELEMENT_PROPERTY="tri-element-name";D.NAME_PROPERTY="tri-record-id";class q extends D{constructor(){super(...arguments),this.memoizedDropableById=Re(e=>this.computeDropableById(e)),this.handleDragover=e=>{e.preventDefault();const{floorPlanLoaded:t,enabled:s}=this.props;if(!s||!t)return;if(!this.formatMap){e.dataTransfer.dropEffect="none";return}const a=this.props.triFloorPlan.props.spaceLayer?q.EMELEMENT_PROPERTY:q.NAME_PROPERTY,o=e.target.getAttribute(a);if(!o){e.dataTransfer.dropEffect="none";return}const n=this.lookupFormat(e);if(!n||!n.dropableMap){e.dataTransfer.dropEffect="none";return}if(!n.dropableMap.has(o)){e.dataTransfer.dropEffect="none";return}let{dropEffect:r}=n;n.onDragover&&(r=onDragover(o,n.type)),(!r||r==="")&&(r="none"),e.dataTransfer.dropEffect=r},this.handleDrop=e=>{e.preventDefault();const{floorPlanLoaded:t,enabled:s}=this.props;if(!s||!t)return;const a=this.lookupFormat(e);if(!a||!a.onDrop)return;const o=this.props.triFloorPlan.props.spaceLayer?q.EMELEMENT_PROPERTY:q.NAME_PROPERTY,n=e.target.getAttribute(o);if(!(n&&a.dropableMap&&a.dropableMap.has(n)))return;let r=a.type;(!r||r==="")&&(r="text/plain");let c=e.dataTransfer.getData(r);if(!c&&r!=="text/plain"&&(r="text/plain",c=e.dataTransfer.getData(r)),!c)return;a.type==="application/json"&&(c=JSON.parse(c));const d={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};a.onDrop(n,c,r,d)}}get dropableById(){return this.memoizedDropableById(this.props.dropable)}pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t}=this.props;if(!e||!t){this.stop();return}this.start(),this.props.formats?(this.formatMap=new Map,this.formats=this.props.formats,Array.isArray(this.formats)||(this.formats=[this.formats]),this.formats.forEach(s=>{s.dropableMap=this.computeDropableById(s.dropable),this.formatMap.set(s.type,s)})):(this.formatMap=new Map,this.formats=[])}pluginDidRemove(){this.stop()}start(){this.addSvgDropListener(),this.props.dropable!==this.lastDropable&&(this.lastDropable=this.props.dropable)}stop(){this.lastDropable=[];const{floorPlanLoaded:e}=this.props;e&&this.removeSvgDropListener()}computeDropableById(e){if(e){const t=new Map;return e.forEach(s=>{t.set(b.getPropValue(s,q.SPACE_ID),s)}),t}else return null}addSvgDropListener(){const e=this.props.triFloorPlan.svgElement;e!==this.lastSvgElement&&(e!=null&&(e.addEventListener("dragover",this.handleDragover),e.addEventListener("drop",this.handleDrop)),this.lastSvgElement=e)}removeSvgDropListener(){const e=this.props.triFloorPlan.svgElement;e!=null&&e===this.lastSvgElement&&(e.removeEventListener("dragover",this.handleDragover),e.removeEventListener("drop",this.handleDrop)),this.lastSvgElement=null}lookupFormat(e){const t=e.dataTransfer.types;let s;for(let a=0;a<t.length&&(s=this.formatMap.get(t[a]),!s);a++);return s}}q.type="Dropable";class de extends D{constructor(){super(),this.onWheelListener=e=>{const{triFloorPlan:t}=this.props;e.preventDefault();const{MAX_MOUSE_WHEEL_SCALE_FACTOR:s,MOUSE_WHEEL_MODIFIER:a}=b;let o=s;typeof this.props.wheelScaleFactor=="number"&&(o=this.props.wheelScaleFactor);let n=1-e.deltaY*a[e.deltaMode];n=Math.min(Math.max(n,1/o),o),this.applyScale(t.svgViewBox.scaleX*n,t.svgViewBox.scaleY*n,{x:e.clientX,y:e.clientY})},this.applyScale=ke((e,t,s)=>{const{triFloorPlan:a,floorPlanLoaded:o}=this.props;if(!o)return;const{svgViewBox:n,svgElement:r,initialSvgViewBox:c,svgViewPort:d}=a;a.svgViewBox=b.scaleSvgViewBox(n,r,c,d,this.minScale,this.maxScale,e,t,s)},10),this.hammer=null,this.pinchInfo=null}get maxScale(){return this.props.maxScale!=null?this.props.maxScale:10}get minScale(){return this.props.minScale!=null?this.props.minScale:.25}get doubleTapZoomFactor(){return this.props.doubleTapZoomFactor!=null?this.props.doubleTapZoomFactor:2}pluginDidUpdate(e){const{floorPlanLoaded:t,enabled:s}=this.props;if(!t||!s){this.stop();return}this.run()}pluginDidRemove(){this.stop()}createHammerManager(e){this.hammer=new X.Manager(e,{recognizers:[[X.Pinch],[X.Tap,{taps:2,interval:200,posThreshold:50,threshold:10,time:600}]]}),this.hammer.on("pinchstart",this.onPinchStart.bind(this)),this.hammer.on("pinchmove",this.onPinchMove.bind(this)),this.hammer.on("pinchend",this.onPinchEnd.bind(this)),this.hammer.on("tap",this.onDoubletap.bind(this))}run(){const{svgElement:e}=this.props.triFloorPlan;this.hammer!=null&&this.hammer.element!==e&&(this.hammer.element.removeEventListener("wheel",this.onWheelListener),this.hammer.destroy(),this.hammer=null),this.hammer===null&&(this.createHammerManager(e),e.addEventListener("wheel",this.onWheelListener))}stop(){this.hammer!==null&&(this.hammer.element.removeEventListener("wheel",this.onWheelListener),this.hammer.destroy(),this.hammer=null)}onPinchStart(e){const{svgViewBox:t}=this.props.triFloorPlan;this.pinchInfo={startScaleX:t.scaleX,startScaleY:t.scaleY},this.applyScale(this.pinchInfo.startScaleX*e.scale,this.pinchInfo.startScaleY*e.scale,e.center)}onPinchMove(e){this.pinchInfo!==null&&this.applyScale(this.pinchInfo.startScaleX*e.scale,this.pinchInfo.startScaleY*e.scale,e.center)}onPinchEnd(){this.pinchInfo=null}onDoubletap(e){const{svgViewBox:t}=this.props.triFloorPlan,{center:s}=e;setTimeout(()=>{this.applyScale(t.scaleX*this.doubleTapZoomFactor,t.scaleY*this.doubleTapZoomFactor,s)})}zoomTo(e){const{triFloorPlan:t,floorPlanLoaded:s}=this.props;if(!s)return;const{initialSvgViewBox:a}=t;let o=e<this.minScale?this.minScale:e;o=o>this.maxScale?this.maxScale:o,o>0&&this.applyScale(a.scaleX*o,a.scaleY*o)}}de.type="zoom";const Ai="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.0.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='32px'%20height='32px'%20viewBox='0%200%2032%2032'%20style='enable-background:new%200%200%2032%2032;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:none;}%20%3c/style%3e%3ctitle%3edraggable%3c/title%3e%3crect%20x='10'%20y='6'%20width='4'%20height='4'/%3e%3crect%20x='18'%20y='6'%20width='4'%20height='4'/%3e%3crect%20x='10'%20y='14'%20width='4'%20height='4'/%3e%3crect%20x='18'%20y='14'%20width='4'%20height='4'/%3e%3crect%20x='10'%20y='22'%20width='4'%20height='4'/%3e%3crect%20x='18'%20y='22'%20width='4'%20height='4'/%3e%3crect%20id='_Transparent_Rectangle_'%20class='st0'%20width='32'%20height='32'/%3e%3c/svg%3e",He="data:image/svg+xml,%3csvg%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20none;%20}%20%3c/style%3e%3c/defs%3e%3cpolygon%20points='24%2019%2021%2019%2021%2016%2019%2016%2019%2019%2016%2019%2016%2021%2019%2021%2019%2024%2021%2024%2021%2021%2024%2021%2024%2019'/%3e%3cpath%20d='M31,29.5859l-4.6885-4.6884a8.028,8.028,0,1,0-1.414,1.414L29.5859,31ZM20,26a6,6,0,1,1,6-6A6.0066,6.0066,0,0,1,20,26Z'/%3e%3cpath%20d='M4,8H2V4A2.0021,2.0021,0,0,1,4,2H8V4H4Z'/%3e%3cpath%20d='M26,8H24V4H20V2h4a2.0021,2.0021,0,0,1,2,2Z'/%3e%3crect%20x='12'%20y='2'%20width='4'%20height='2'/%3e%3cpath%20d='M8,26H4a2.0021,2.0021,0,0,1-2-2V20H4v4H8Z'/%3e%3crect%20x='2'%20y='12'%20width='2'%20height='4'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e",Mi="data:image/svg+xml,%3csvg%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20rgba(%20128,%20128,%20128,%200.5%20);%20}%20%3c/style%3e%3c/defs%3e%3cpolygon%20points='24%2019%2021%2019%2021%2016%2019%2016%2019%2019%2016%2019%2016%2021%2019%2021%2019%2024%2021%2024%2021%2021%2024%2021%2024%2019'/%3e%3cpath%20d='M31,29.5859l-4.6885-4.6884a8.028,8.028,0,1,0-1.414,1.414L29.5859,31ZM20,26a6,6,0,1,1,6-6A6.0066,6.0066,0,0,1,20,26Z'/%3e%3cpath%20d='M4,8H2V4A2.0021,2.0021,0,0,1,4,2H8V4H4Z'/%3e%3cpath%20d='M26,8H24V4H20V2h4a2.0021,2.0021,0,0,1,2,2Z'/%3e%3crect%20x='12'%20y='2'%20width='4'%20height='2'/%3e%3cpath%20d='M8,26H4a2.0021,2.0021,0,0,1-2-2V20H4v4H8Z'/%3e%3crect%20x='2'%20y='12'%20width='2'%20height='4'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e",Bi="data:image/svg+xml,%3csvg%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20none;%20}%20%3c/style%3e%3c/defs%3e%3cpolygon%20points='18%2012%2014%2012%2014%208%2012%208%2012%2012%208%2012%208%2014%2012%2014%2012%2018%2014%2018%2014%2014%2018%2014%2018%2012'/%3e%3cpath%20d='M21.4479,20A10.856,10.856,0,0,0,24,13,11,11,0,1,0,13,24a10.856,10.856,0,0,0,7-2.5521L27.5859,29,29,27.5859ZM13,22a9,9,0,1,1,9-9A9.01,9.01,0,0,1,13,22Z'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e",Ii="data:image/svg+xml,%3csvg%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20none;%20}%20%3c/style%3e%3c/defs%3e%3crect%20x='8'%20y='12'%20width='10'%20height='2'/%3e%3cpath%20d='M21.4479,20A10.856,10.856,0,0,0,24,13,11,11,0,1,0,13,24a10.856,10.856,0,0,0,7-2.5521L27.5859,29,29,27.5859ZM13,22a9,9,0,1,1,9-9A9.01,9.01,0,0,1,13,22Z'%20transform='translate(0)'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e",Fi="data:image/svg+xml,%3csvg%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20none;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20d='M21.4479,20A10.856,10.856,0,0,0,24,13,11,11,0,1,0,13,24a10.856,10.856,0,0,0,7-2.5521L27.5859,29,29,27.5859ZM13,22a9,9,0,1,1,9-9A9.01,9.01,0,0,1,13,22Z'/%3e%3cpath%20d='M10,12H8V10a2.0023,2.0023,0,0,1,2-2h2v2H10Z'/%3e%3cpath%20d='M18,12H16V10H14V8h2a2.0023,2.0023,0,0,1,2,2Z'/%3e%3cpath%20d='M12,18H10a2.0023,2.0023,0,0,1-2-2V14h2v2h2Z'/%3e%3cpath%20d='M16,18H14V16h2V14h2v2A2.0023,2.0023,0,0,1,16,18Z'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e";class he extends D{constructor(){super(),this.applyScale=ke((e,t,s)=>{const{triFloorPlan:a,floorPlanLoaded:o}=this.props;if(!o)return;const{svgViewBox:n,svgElement:r,svgViewPort:c}=a;a.svgViewBox=b.scaleSvgViewBox(n,r,this.shadow.svgViewBox,c,this.minScale,this.maxScale,e,t,s)},10),this.thumbnail={},this.shadow={},this.started=!1,this.size=100,this.maxScale=10,this.minScale=.25,this.minHeight=250,this.minWidth=250,this.isZoomBoxActive=!1,this.handleZoomBoxDragEnd=this.handleZoomBoxDragEnd.bind(this)}set enableZoomBox(e){this.zoomBox&&(this.zoomBox.disabled=!e)}pluginDidUpdate(){const{triFloorPlan:e,floorPlanLoaded:t,enabled:s}=this.props,{svgElement:a}=e;if(!t||!s||!a){this.stop();return}this.triFloorPlan=e,this.start(),this.theme!==this.props.theme&&(this.theme=this.props.theme,this.setStyle())}pluginDidRemove(){this.stop()}floorPlanDidResize(){this.sizeShadow(),this.sizeNavWindow(),this.initThumbnail(),this.sizeNavWindow(),this.handleNavResetPosition()}floorPlanDidPanOrZoom(e){setTimeout(()=>{this.sizeAndPositionViewport(e)},10)}start(){if(this.started)return;switch(this.props.size){case"sm":this.size=75;break;case"md":this.size=100;break;case"lg":this.size=150;break}this.props.minDisplayHeight&&(this.minHeight=this.props.minDisplayHeight),this.props.minDisplayWidth&&(this.minWidth=this.props.minDisplayWidth);const{svgElement:e,floorPlanId:t}=this.triFloorPlan;this.started=!0,this.zoomPlugin=null,this.triFloorPlan.pluginInstances.forEach(n=>{n.props.type==="zoom"&&(this.zoomPlugin=n)}),this.navWindow=document.createElement("div"),this.navWindow.className="TriNavWindow",this.zoomPlugin!==null&&(this.zoomBar=this.createZoomSlider(),this.maxScale=this.zoomPlugin.maxScale,this.minScale=this.zoomPlugin.minScale,this.navWindow.appendChild(this.zoomBar));const s=document.createElement("div");s.className="TriNavThumbBar",s.appendChild(this.createControlPalette()),this.thumbnail.window=document.createElement("div"),this.thumbnail.window.className="TriNavThumbnail",this.thumbnail.window.addEventListener("dblclick",n=>this.handleZoomToFit(n),!0),s.appendChild(this.thumbnail.window),this.navWindow.appendChild(s),e.parentElement.appendChild(this.navWindow),this.setStyle(),this.getFloorPlan(t).then(n=>{this.thumbnail.window.innerHTML=n,setTimeout(()=>{this.thumbnail.SVG=this.thumbnail.window.querySelector("svg"),this.thumbnail.SVG.setAttribute("preserveAspectRatio","xMidYMid"),this.props.svgAriaLabel&&this.thumbnail.SVG.setAttribute("aria-label",this.props.svgAriaLabel),this.createViewPort(),this.sizeNavWindow()},1)}),this.createShadowSVG()}stop(){this.props.floorPlanLoaded&&(this.navWindow&&this.navWindow.parentElement.removeChild(this.navWindow),this.shadow.window&&this.shadow.window.parentElement.removeChild(this.shadow.window)),this.navWindow=null,this.thumbnail={},this.shadow={},this.started=!1}async getFloorPlan(e){return await ie.getFloorplan(e)}setStyle(){this.theme==="dark"?(this.thumbnail.window.style.backgroundColor="black",this.dragHandle.style.color="white",this.dragHandle.style.backgroundColor="#393939",this.zoom&&(this.zoomOutImg.style.color="white",this.zoomOutImg.style.backgroundColor="#393939",this.zoom.style.backgroundColor="#393939",this.zoom.style.color="white",this.zoom.style.backgroundColor="#393939",this.zoomInImg.style.color="white",this.zoomInImg.style.backgroundColor="#393939",this.zoomFit.style.color="white",this.zoomFit.style.backgroundColor="#393939",this.zoomBox.style.color="white",this.zoomBox.style.backgroundColor="#393939")):(this.thumbnail.window.style.backgroundColor="white",this.dragHandle.style.color="black",this.dragHandle.style.backgroundColor="white",this.zoom&&(this.zoomOutImg.style.color="black",this.zoomOutImg.style.backgroundColor="white",this.zoom.style.color="black",this.zoom.style.backgroundColor="white",this.zoomInImg.style.color="black",this.zoomInImg.style.backgroundColor="white",this.zoomFit.style.color="black",this.zoomFit.style.backgroundColor="white",this.zoomBox.style.color="black",this.zoomBox.style.backgroundColor="white"))}createZoomSlider(){const e=document.createElement("div");return e.className="TriNavZoomBar",this.zoomOutImg=document.createElement("img"),this.zoomOutImg.src=Ii,this.zoomOutImg.width=24,this.zoomOutImg.heiht=24,this.zoomOutImg.addEventListener("click",()=>{--this.zoom.value,this.handleZoom()},!0),e.appendChild(this.zoomOutImg),this.zoom=document.createElement("input"),this.zoom.className="TriNavZoom",this.zoom.type="range",this.zoom.min=1,this.zoom.max=this.maxScale+1/this.minScale-1,this.zoom.step=1/((this.zoom.max-1)*3),this.zoom.oninput=t=>this.handleZoom(t),e.appendChild(this.zoom),this.zoomInImg=document.createElement("img"),this.zoomInImg.src=Bi,this.zoomInImg.width=24,this.zoomInImg.heiht=24,this.zoomInImg.addEventListener("click",()=>{++this.zoom.value,this.handleZoom()},!0),e.appendChild(this.zoomInImg),e}createControlPalette(){const{svgElement:e}=this.triFloorPlan,t=e.parentElement,s=document.createElement("div");return s.className="TriNavControlBar",this.dragHandle=document.createElement("div"),this.dragHandle.className="TriNavDrag",this.dragHandle.style.backgroundImage="url('"+Ai+"')",this.dragHandle.addEventListener("mousedown",a=>this.handleStartDragNav(a),!0),t.addEventListener("mousemove",a=>this.handleDragNav(a),!0),t.addEventListener("mouseup",()=>{this.isDraggingNav=!1},!0),this.dragHandle.addEventListener("mouseup",()=>{this.isDraggingNav=!1},!0),this.dragHandle.addEventListener("dblclick",a=>this.handleNavResetPosition(a),!0),s.appendChild(this.dragHandle),this.zoomFit=document.createElement("div"),this.zoomFit.className="TriNavControl",this.zoomFitImg=document.createElement("img"),this.zoomFitImg.src=Fi,this.zoomFitImg.width=24,this.zoomFitImg.heiht=24,this.zoomFitImg.addEventListener("click",()=>{this.handleZoomToFit()},!0),this.zoomFit.appendChild(this.zoomFitImg),s.appendChild(this.zoomFit),this.zoomPlugin!==null&&(this.zoomBox=document.createElement("div"),this.zoomBox.className="TriNavControl",this.zoomBoxImg=document.createElement("img"),this.zoomBoxImg.src=He,this.zoomBoxImg.width=24,this.zoomBoxImg.height=24,this.zoomBoxImg.addEventListener("click",()=>{this.handleZoomBox()},!0),this.zoomBox.appendChild(this.zoomBoxImg),s.appendChild(this.zoomBox)),s}createShadowSVG(){const{svgElement:e,floorPlanId:t,svgViewPort:s}=this.triFloorPlan;(e.clientWidth!==s.width||e.clientHeight!==s.height)&&this.triFloorPlan.floorPlanDidResize(),this.shadow.window=document.createElement("div"),this.shadow.window.className="TriNavShadow",e.parentElement.appendChild(this.shadow.window),this.getFloorPlan(t).then(n=>{this.shadow.window.innerHTML=n,setTimeout(()=>{this.shadow.SVG=this.shadow.window.querySelector("svg"),this.shadow.SVG.setAttribute("preserveAspectRatio","xMidYMid"),this.props.svgAriaLabel&&this.shadow.SVG.setAttribute("aria-label",this.props.svgAriaLabel),b.setSvgViewBox(this.shadow.SVG,0,0,0,0),this.sizeShadow(),this.initThumbnail()},1)})}createViewPort(){this.viewport=document.createElement("div"),this.viewport.className="TriNavViewport",this.thumbnail.window.appendChild(this.viewport),this.viewport.addEventListener("mouseover",e=>{e.currentTarget.style.cursor="move"}),this.viewport.addEventListener("mouseout",e=>{e.currentTarget.style.cursor="inherit"}),this.viewport.addEventListener("dblclick",e=>this.handleZoomToFit(e),!0),this.hammer=new X.Manager(this.viewport,{recognizers:[[X.Pan]]}),this.hammer.on("panstart",this.handleStartViewportDrag.bind(this)),this.hammer.on("panmove",this.handleViewportDrag.bind(this))}initThumbnail(){if(!this.shadow.SVG)return;const e=this.shadow.SVG.createSVGPoint();let t=this.shadow.SVG.getCTM();t===null&&(t=this.shadow.SVG.firstElementChild.getCTM()),this.initSVG_0_0=e.matrixTransform(t.inverse()),t=this.shadow.SVG.getScreenCTM(),e.x=this.initSVG_0_0.x,e.y=this.initSVG_0_0.y,this.initClient_0_0=e.matrixTransform(t),this.sizeAndPositionViewport(this.triFloorPlan.svgViewBox)}sizeNavWindow(){const{triFloorPlan:e,enabled:t,floorPlanLoaded:s}=this.props,{svgElement:a}=e;if(!this.thumbnail.window)return;if(!s||!t||!a)return null;if(!this.thumbnail.SVG)return;b.setSvgViewBox(this.thumbnail.SVG,0,0,0,0);const o=b.getSvgExtents(this.thumbnail.SVG),n=this.thumbnail.SVG.getBoundingClientRect(),r=b.createInitialSvgViewBox(o,n);if(!r)return;let c=this.size;(a.clientHeight<this.minHeight+100||a.clientWidth<this.minWidth+100)&&(c=75),this.thumbnail.width=c,this.thumbnail.height=c,a.clientHeight>a.clientWidth?this.thumbnail.height=Math.round(a.clientHeight*this.thumbnail.width/a.clientWidth):this.thumbnail.width=Math.round(a.clientWidth*this.thumbnail.height/a.clientHeight),this.thumbnail.Scale=this.thumbnail.height/a.clientHeight,this.thumbnail.window.style.width=""+this.thumbnail.width+"px",this.thumbnail.window.style.height=""+this.thumbnail.height+"px",this.zoomBox&&(this.thumbnail.height>=100?this.zoomBox.style.visibility="visible":this.zoomBox.style.visibility="hidden"),b.setSvgViewBox(this.thumbnail.SVG,r.x,r.y,r.scaleX!=0?n.width/r.scaleX:0,r.scaleY!=0?n.height/r.scaleY:0);const d=a.parentElement;this.navWindow.offsetTop+this.navWindow.offsetHeight>d.offsetHeight&&(this.navWindow.style.top=d.offsetHeight-this.navWindow.offsetHeight+"px"),this.navWindow.offsetTop<0&&(this.navWindow.style.top=0),this.navWindow.offsetLeft+this.navWindow.offsetWidth>d.offsetWidth&&(this.navWindow.style.left=d.offsetWidth-this.navWindow.offsetWidth+"px"),this.navWindow.offsetLeft<0&&(this.navWindow.style.left=0),this.zoom&&(this.zoom.style.width=this.thumbnail.width-24+"px"),a.clientHeight<this.minHeight||a.clientWidth<this.minWidth?this.navWindow.style.visibility="hidden":this.navWindow.style.visibility="visible"}sizeShadow(){const{triFloorPlan:e,enabled:t,floorPlanLoaded:s}=this.props,{svgElement:a}=e;if(!this.thumbnail.window)return;if(!s||!t||!a)return null;if(!this.shadow.SVG)return;const o=a.parentElement;this.shadow.window.style.height=o.offsetHeight+"px",this.shadow.window.style.width=o.offsetWidth+"px",b.setSvgViewBox(this.shadow.SVG,0,0,0,0);const n=b.getSvgExtents(this.shadow.SVG),r=this.shadow.SVG.getBoundingClientRect();this.shadow.svgViewBox=b.createInitialSvgViewBox(n,r);let c=this.shadow.svgViewBox.scaleX,d=this.shadow.svgViewBox.scaleY;c===0&&(c=1),d===0&&(d=1),b.setSvgViewBox(this.shadow.SVG,this.shadow.svgViewBox.x,this.shadow.svgViewBox.y,r.width/c,r.height/d)}sizeAndPositionViewport(e){if(!e||!this.initSVG_0_0||!this.shadow||!this.shadow.svgViewBox)return;const{svgElement:t}=this.triFloorPlan,s=this.shadow.svgViewBox.scaleX/e.scaleX,a=this.shadow.svgViewBox.scaleY/e.scaleY,o=s<a?s:a,n=this.thumbnail.width*o,r=this.thumbnail.height*o,c=t.getScreenCTM(),d=t.createSVGPoint();d.x=this.initSVG_0_0.x,d.y=this.initSVG_0_0.y;const h=d.matrixTransform(c),m=h.x-this.initClient_0_0.x,g=h.y-this.initClient_0_0.y,u=m*this.thumbnail.Scale*o,x=g*this.thumbnail.Scale*o;this.viewport.style.width=""+Math.round(n)+"px",this.viewport.style.height=""+Math.round(r)+"px",this.viewport.style.left=""+Math.round(-u)+"px",this.viewport.style.top=""+Math.round(-x)+"px",this.clipViewport();let y=o;y<1?y=1/y+1/this.minScale-1:y=1/this.minScale-y+1,this.zoom&&(this.zoom.value=y)}clipViewport(){const e=this.viewport.offsetLeft>0?0:-this.viewport.offsetLeft,t=this.viewport.offsetTop>0?0:-this.viewport.offsetTop,s=this.thumbnail.width-this.viewport.offsetLeft,a=this.thumbnail.height-this.viewport.offsetTop,o="rect("+t+"px,"+s+"px,"+a+"px,"+e+"px)";this.viewport.style.clip=o}handleStartViewportDrag(){const{svgElement:e}=this.triFloorPlan;this.dragViewport={start:{x:this.viewport.offsetLeft,y:this.viewport.offsetTop},current:{x:0,y:0}};const s=e.getScreenCTM().inverse();this.panStart={matrix:s,orig:{x:this.props.triFloorPlan.svgViewBox.x,y:this.props.triFloorPlan.svgViewBox.y},start:this.viewportLocToClientLoc()}}handleViewportDrag(e){e.preventDefault();const{svgViewBox:t,svgElement:s}=this.triFloorPlan;this.viewport.style.cursor="move",this.dragViewport.current.x=e.deltaX,this.dragViewport.current.y=e.deltaY;let a=this.dragViewport.start.x+this.dragViewport.current.x;const o=this.viewport.offsetWidth;a<4-o&&(a=4-o),a>this.thumbnail.width-4&&(a=this.thumbnail.width-4);let n=this.dragViewport.start.y+this.dragViewport.current.y;const r=this.viewport.offsetHeight;n<4-r&&(n=4-r),n>this.thumbnail.height-4&&(n=this.thumbnail.height-4),this.viewport.style.left=a+"px",this.viewport.style.top=n+"px",this.clipViewport();const c=this.viewportLocToClientLoc(),d=this.panStart.start.x-c.x,h=this.panStart.start.y-c.y;this.triFloorPlan.svgViewBox=b.panSvgViewBox(s,t,d,h,this.panStart)}handleZoomToFit(){this.floorPlanDidResize(),this.triFloorPlan.svgViewBox=this.shadow.svgViewBox}viewportLocToClientLoc(){const{svgViewBox:e}=this.triFloorPlan,t=this.shadow.svgViewBox.scaleX/e.scaleX,s=this.shadow.svgViewBox.scaleY/e.scaleY,a=t<s?t:s,o=this.viewport.offsetLeft/(this.thumbnail.Scale*a),n=this.viewport.offsetTop/(this.thumbnail.Scale*a);return{x:o,y:n}}handleStartDragNav(e){this.isDraggingNav=!0,this.dragNav={offset:{x:e.screenX-this.navWindow.offsetLeft,y:e.screenY-this.navWindow.offsetTop},start:{x:this.navWindow.offsetLeft,y:this.navWindow.offsetTop},current:{x:this.navWindow.offsetLeft,y:this.navWindow.offsetTop}}}handleDragNav(e){if(!e.buttons||e.buttons===0){this.dragNav={},this.isDraggingNav=!1;return}if(!this.isDraggingNav)return;const{triFloorPlan:t,floorPlanLoaded:s}=this.props;if(!s)return;e.preventDefault();const{svgElement:a}=t,o=a.parentElement;this.dragNav.current.x=e.screenX-this.dragNav.offset.x,this.dragNav.current.y=e.screenY-this.dragNav.offset.y;let n=this.dragNav.current.x;n<0&&(n=0),n>o.offsetWidth-this.navWindow.offsetWidth&&(n=o.offsetWidth-this.navWindow.offsetWidth);let r=this.dragNav.current.y;r<0&&(r=0),r>o.offsetHeight-this.navWindow.offsetHeight&&(r=o.offsetHeight-this.navWindow.offsetHeight),this.navWindow.style.left=""+n+"px",this.navWindow.style.top=""+r+"px"}handleNavResetPosition(){const{triFloorPlan:e}=this.props,{svgElement:t}=e,s=t.parentElement,a=s.offsetWidth-this.navWindow.offsetWidth,o=s.offsetHeight-this.navWindow.offsetHeight;this.navWindow.style.left=""+a+"px",this.navWindow.style.top=""+o+"px"}handleZoom(){const{triFloorPlan:e,floorPlanLoaded:t}=this.props;if(!t)return;const{svgElement:s,svgExtents:a}=e,o=s.parentElement;let n=this.zoom.value;n-1/this.minScale>=0?n=1/(n-1/this.minScale+1):n=1/this.minScale-n+1,n===0&&(n=1);const r=s.getScreenCTM(),c=s.createSVGPoint();c.x=a.x+a.width/2,c.y=a.y+a.height/2;const d=c.matrixTransform(r);d.x>o.offsetWidth&&(d.x=o.offsetWidth),d.y>o.offsetHeight&&(d.y=o.offsetHeight),d.x<0&&(d.x=0),d.y<0&&(d.y=0),this.applyScale(this.shadow.svgViewBox.scaleX/n,this.shadow.svgViewBox.scaleY/n,{x:d.x,y:d.y})}handleZoomBox(){const{triFloorPlan:e}=this.props,{svgElement:t}=e,s=t.parentElement;if(this.isZoomBoxActive||this.dragBoundingBox){this.removeZoomBoxListeners(s),this.dragBoundingBox=null;return}e.pluginInstances.forEach(a=>{a.props.type===K.type&&(a.enabled=!1)}),this.zoomBox.className="TriNavControlActive",this.zoomBoxImg.src=Mi,this.isZoomBoxActive=!0,s.addEventListener("mousedown",this.handleDragStart,!0),s.addEventListener("mousemove",this.handleDragMove,!0),s.addEventListener("mouseup",this.handleZoomBoxDragEnd,!0)}handleDragStart(e){e.srcElement!==this.zoomBoxImg&&super.handleDragStart(e)}handleZoomBoxDragEnd(e){if(e.srcElement===this.zoomBoxImg)return;const{triFloorPlan:t}=this.props,{svgElement:s,svgViewPort:a}=t,o=s.parentElement;if(this.dragBox&&(o.removeChild(this.dragBox),this.dragBox=null),e.preventDefault(),this.removeZoomBoxListeners(o),!this.dragBoundingBox)return;let n,r,c,d;this.dragBoundingBox.current.x>this.dragBoundingBox.start.x?(r=this.dragBoundingBox.start.x,d=this.dragBoundingBox.current.x):(d=this.dragBoundingBox.start.x,r=this.dragBoundingBox.current.x),this.dragBoundingBox.current.y>this.dragBoundingBox.start.y?(n=this.dragBoundingBox.start.y,c=this.dragBoundingBox.current.y):(c=this.dragBoundingBox.start.y,n=this.dragBoundingBox.current.y);let h=c-n,m=d-r;const g=o.scrollWidth/m,u=o.scrollHeight/h;if(g>u){const j=Math.round(o.scrollWidth/u);r=r+m/2-j/2,d=r+j}else{const j=Math.round(o.scrollHeight/g);n=n+h/2-j/2,c=n+j}let x=s.getScreenCTM().inverse();const y=s.createSVGPoint();y.x=a.left+r,y.y=a.top+n;const f=y.matrixTransform(x),p=s.createSVGPoint();p.x=a.left+d,p.y=a.top+c;const v=p.matrixTransform(x);m=v.x-f.x,h=v.y-f.y,this.zoomToBox(f.x,f.y,m,h),this.dragBoundingBox=null}removeZoomBoxListeners(e){const{triFloorPlan:t}=this.props;t.pluginInstances.forEach(s=>{s.props.type===K.type&&(s.enabled=!0)}),this.zoomBox.className="TriNavControl",this.zoomBoxImg.src=He,this.isZoomBoxActive=!1,e.removeEventListener("mousedown",this.handleDragStart,!0),e.removeEventListener("mousemove",this.handleDragMove,!0),e.removeEventListener("mouseup",this.handleZoomBoxDragEnd,!0)}}he.type="nav";class L extends D{constructor(){super(),this.memoizedSelectableById=Re(e=>this.computeSelectableById(e)),this.svgContainerTapped=se(e=>{if(this.disableTap){this.disableTap=!1;return}const{floorPlanLoaded:t,enabled:s,multi:a,onSelectedChange:o}=this.props;if(!s||!this.enabled||!t||!this.selectableById)return;const n=this.props.triFloorPlan.props.spaceLayer?L.EMELEMENT_PROPERTY:L.NAME_PROPERTY,r={triRecordId:e.target.getAttribute(n),class:e.target.getAttribute("class"),isPin:e.target.getAttribute("pin")==="true"};let c=null;const d=r.triRecordId;if(this.isValidSelection(r,d)){if(c=this.selectableById.get(d),a){const h=this.selected?[...this.selected]:[];if(c&&h){const m=h.findIndex(g=>b.getPropValue(c,L.SPACE_ID)===b.getPropValue(g,L.SPACE_ID));m!==-1?h.splice(m,1):h.push(c),c=h}}else c&&this.selected&&b.getPropValue(c,L.SPACE_ID)===b.getPropValue(this.selected,L.SPACE_ID)&&(c=null);o&&o(c)}else a||o&&o(null)},300,{leading:!0,trailing:!1}),this.dragSelect=!1,this.handleDragSelectEnd=this.handleDragSelectEnd.bind(this),this.zoomToFit=!1}get selectableClassName(){return this.props.selectableClassName!=null?this.props.selectableClassName:"selectable"}get selectedClassName(){return this.props.selectedClassName!=null?this.props.selectedClassName:"selected"}get selected(){return this.props.selected!=null?this.props.selected:this.props.multi?[]:null}get selectableById(){return this.memoizedSelectableById(this.props.selectable)}pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t}=this.props;if(!e||!t){this.stop();return}this.start(),this.dragSelect!==this.props.dragSelect&&(this.dragSelect=this.props.dragSelect,this.dragSelect&&this.props.multi?this.addDragSelectListeners():this.removeDragSelectListeners()),this.zoomToFit!=this.props.zoomToSelection&&(this.zoomToFit=this.props.zoomToSelection,this.zoomToFit&&this.zoomToSelection(this.selected))}pluginDidRemove(){this.stop()}start(){this.addSvgTapListener(),(this.props.selectable!==this.lastSelectable||this.lastSelectableClassName!==this.selectableClassName)&&(this.updateSelectable(this.selectableById),this.lastSelectable=this.props.selectable,this.lastSelectableClassName=this.selectableClassName),(this.props.selected!==this.lastSelected||this.lastSelectedClassName!==this.selectedClassName)&&(this.updateSelected(this.selected),this.lastSelectedClassName=this.selectedClassName,this.lastSelected=this.props.selected,this.props.zoomToSelection&&this.zoomToSelection(this.selected))}stop(){this.lastSelectable=[];const{triFloorPlan:e,floorPlanLoaded:t}=this.props;t&&(this.removeSvgTapListener(),this.dragSelect&&this.removeDragSelectListeners(),b.clearAllClasses(this.selectableClassName,e.svgElement),b.clearAllClasses(this.selectedClassName,e.svgElement))}updateSelectable(e){const{floorPlanLoaded:t,enabled:s,triFloorPlan:a}=this.props;!t||!s||(b.clearAllClasses(this.lastSelectableClassName,a.svgElement),!(!e||e.size===0)&&e.forEach((o,n)=>{b.addClass(n,this.selectableClassName,a.attachedMap),b.addClass(n,this.selectableClassName,a.interactiveMap)}))}updateSelected(e){const{floorPlanLoaded:t,enabled:s,triFloorPlan:a,multi:o}=this.props;if(!s||!t||(b.clearAllClasses(this.lastSelectedClassName,a.svgElement),this.disableTap=!1,De(e)))return;const n=o?e:[e];for(const r of n)b.addClass(b.getPropValue(r,L.SPACE_ID),this.selectedClassName,a.attachedMap),b.addClass(b.getPropValue(r,L.SPACE_ID),this.selectedClassName,a.interactiveMap)}zoomToSelection(e){const{floorPlanLoaded:t,enabled:s,triFloorPlan:a,multi:o}=this.props,{svgElement:n,svgViewPort:r}=a;if(n.parentElement,!s||!t)return;let c;if(a.pluginInstances.forEach(x=>{x.props.type===de.type&&(c=x)}),!c||De(e))return;let d,h,m,g;const u=o?e:[e];for(const x of u){const y=b.getPropValue(x,L.SPACE_ID),f=a.attachedMap.get(y);if(!f)continue;const p=f.getBBox();d?(p.x<d&&(d=p.x),p.y<h&&(h=p.y),p.x+p.width>m&&(m=p.x+p.width),p.y+p.height>g&&(g=p.y+p.height)):(d=p.x,h=p.y,m=p.x+p.width,g=p.y+p.height)}typeof this.props.zoomPadding=="number"&&(d-=this.props.zoomPadding,h-=this.props.zoomPadding,m+=this.props.zoomPadding,g+=this.props.zoomPadding),this.zoomToBox(d,h,m-d,g-h)}computeSelectableById(e){if(e){const t=new Map;return e.forEach(s=>{t.set(b.getPropValue(s,L.SPACE_ID),s)}),t}else return null}addSvgTapListener(){const e=this.props.triFloorPlan.svgElement;e!==this.lastSvgElement&&(e!=null&&e.addEventListener("click",this.svgContainerTapped),this.lastSvgElement=e)}removeSvgTapListener(){const e=this.props.triFloorPlan.svgElement;e!=null&&e===this.lastSvgElement&&e.removeEventListener("click",this.svgContainerTapped),this.lastSvgElement=null}isValidSelection(e,t){return!t||!this.selectableById.has(t)?!1:e.isPin?!0:!(!this.props.triFloorPlan.props.spaceLayer&&e.class&&e.class.indexOf("tri-interactive")===-1)}handleDragSelectEnd(e){const{triFloorPlan:t}=this.props,{svgElement:s}=t,a=s.parentElement;this.dragBox&&(a.removeChild(this.dragBox),this.dragBox=null),e.preventDefault(),e.stopPropagation();let o=this.dragBoundingBox.current.x,n=this.dragBoundingBox.current.y;var r,c,d,h;c=o>this.dragBoundingBox.start.x?this.dragBoundingBox.start.x:o,h=Math.abs(o-this.dragBoundingBox.start.x),r=n>this.dragBoundingBox.start.y?this.dragBoundingBox.start.y:n,d=Math.abs(n-this.dragBoundingBox.start.y),this.findSelected(r,c,d,h),this.dragBoundingBox=null}addDragSelectListeners(){const{triFloorPlan:e}=this.props,{svgElement:t}=e,s=t.parentElement;e.pluginInstances.forEach(a=>{a.props.type===he.type&&(a.enableZoomBox=!1),a.props.type===K.type&&(a.enabled=!1)}),s.addEventListener("mousedown",this.handleDragStart,!0),s.addEventListener("mousemove",this.handleDragMove,!0),s.addEventListener("mouseup",this.handleDragSelectEnd,!0)}removeDragSelectListeners(){const{triFloorPlan:e}=this.props,{svgElement:t}=e,s=t.parentElement;e.pluginInstances.forEach(a=>{a.props.type===he.type&&(a.enableZoomBox=!0),a.props.type===K.type&&(a.enabled=!0)}),s.removeEventListener("mousedown",this.handleDragStart,!0),s.removeEventListener("mousemove",this.handleDragMove,!0),s.removeEventListener("mouseup",this.handleDragSelectEnd,!0)}findSelected(e,t,s,a){const{triFloorPlan:o}=this.props,{svgElement:n,svgViewPort:r}=o;let c=!1,d=n.getScreenCTM().inverse();const h=n.createSVGPoint();h.x=r.left+t,h.y=r.top+e;const m=h.matrixTransform(d),g=n.createSVGPoint();g.x=h.x+a,g.y=h.y+s;const u=g.matrixTransform(d);if(!this.selectableById||this.selectableById.size===0)return;const x=this.props.selected?[...this.props.selected]:[];this.selectableById.forEach((f,p)=>{const v=o.attachedMap.get(p);this.isSpaceInRect(m.x,m.y,u.x,u.y,v.getBBox())&&x.findIndex(G=>{const M=b.getPropValue(G,L.SPACE_ID);return p===M})===-1&&(c=!0,x.push(this.selectableById.get(p)))});const{onSelectedChange:y}=this.props;if(typeof y=="function"){let f=x;c&&(f=[...x]),this.disableTap=!0,setTimeout(async()=>y(f))}}isSpaceInRect(e,t,s,a,o){return!(o.x<e||o.x+o.width>s||o.y<t||o.y+o.height>a)}}L.type="selectable";class K extends D{constructor(){super(),this.panFloorPlan=ke((e,t,s)=>{const{svgViewBox:a,svgElement:o}=this.props.triFloorPlan;this.props.triFloorPlan.svgViewBox=b.panSvgViewBox(o,a,e,t,s)},10),this.hammer=null,this.panStart=null}pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t}=this.props;if(!e||!t){this.stop();return}this.run()}pluginDidRemove(){this.stop()}createHammerManager(e){this.hammer=new X.Manager(e,{recognizers:[[X.Pan]]}),this.hammer.on("panstart",this.onPanStart.bind(this)),this.hammer.on("panmove",this.onPanMove.bind(this)),this.hammer.on("panend",this.onPanEnd.bind(this))}run(){const{svgElement:e}=this.props.triFloorPlan;this.hammer===null?this.createHammerManager(e):this.hammer.element!==e&&(this.hammer.destroy(),this.createHammerManager(e))}stop(){this.hammer!==null&&(this.hammer.destroy(),this.hammer=null)}onPanStart(e){if(!this.enabled)return;const{triFloorPlan:t}=this.props;t.pluginInstances.forEach(o=>{o.props.type===L.type&&(o.enabled=!1)});const a=this.props.triFloorPlan.svgElement.getScreenCTM().inverse();this.panStart={matrix:a,orig:{x:this.props.triFloorPlan.svgViewBox.x,y:this.props.triFloorPlan.svgViewBox.y}},this.panFloorPlan(e.deltaX,e.deltaY,this.panStart)}onPanMove(e){if(this.panStart===null||!this.enabled)return;const{x:t,y:s,height:a,width:o}=this.props.triFloorPlan.svgViewPort;e.center.x>=t&&e.center.x<=t+o&&e.center.y>=s&&e.center.y<=s+a&&this.panFloorPlan(e.deltaX,e.deltaY,this.panStart)}onPanEnd(){const{triFloorPlan:e}=this.props;e.pluginInstances.forEach(t=>{t.props.type===L.type&&setTimeout(()=>{t.enabled=!0},100)}),this.panStart=null}}K.type="pan";const qe=new Map;class Pe extends D{pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t,svgViewBox:s}=this.props;!e||!t||(e!==this.lastFloorPlanLoaded?(this.loadLastSvgViewBox(),this.lastFloorPlanLoaded=e):b.isSvgViewBoxEquals(s,this.lastSvgViewBox)||(this.cacheSvgViewBox(s),this.lastSvgViewBox=s))}cacheSvgViewBox(e){e!=null&&qe.set(`${this.props.triFloorPlan.floorPlanId}`,e)}loadLastSvgViewBox(){const e=qe.get(`${this.props.triFloorPlan.floorPlanId}`);e!=null&&(this.props.triFloorPlan.svgViewBox=e)}}Pe.type="last-position";let ye=class je extends D{constructor(){super(),this.updateLabelScale=se(e=>{this.props.autoScale&&(this.scaleLabels(e),this.hideOverlappingLabels(e),this.curretViewBox=e)},100),this.magnification=1,this.textPixelHeight=je.TEXT_PIXEL_HEIGHT}pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t,hideOverlapping:s,labelId:a,magnification:o}=this.props;if(!e||!t){this.clearLabelsLayer(),this.lastLabelId=null,this.labelGroup=null;return}typeof this.props.pointSize=="number"&&(this.textPixelHeight=je.TEXT_PIXEL_HEIGHT/8*this.props.pointSize),a!==this.lastLabelId&&(this.lastLabelId=a,this.updateLabels());let n=!1,r=!1;if(this.textClass!==this.props.textClass){const c=this.getLabelLayerElement();c&&(this.setLabelClass(c,this.props.textClass),r=!0)}this.textClass=this.props.textClass,this.hideOverlapping!==s&&(r=!0),this.hideOverlapping=s,this.autoScale!==this.props.autoScale&&(n=!0,r=!0),this.autoScale=this.props.autoScale,this.pointSize!==this.props.pointSize&&(n=!0,r=!0),this.pointSize=this.props.pointSize,this.magnification!==o&&o&&(n=!0,r=!0,this.magnification=this.props.magnification),n&&this.scaleLabels(this.curretViewBox,!0),r&&this.hideOverlappingLabels(this.curretViewBox,!0)}pluginDidRemove(){this.clearLabelsLayer()}floorPlanDidPanOrZoom(e){this.updateLabelScale(e)}async updateLabels(){this.clearLabelsLayer();const{triFloorPlan:e,labelId:t,onLoadError:s,textClass:a}=this.props,{initialSvgViewBox:o}=e,n=e.floorPlanId;let r=this.getLabelLayerElement();if(!r)return;let c={};try{c=await ie.getLabelsLayer(n,t)}catch(h){s&&s(h);return}if(!c)return;r.innerHTML=c,this.labelGroup=this.flatten(r.children),a&&this.setLabelClass(r,a),this.bBoxMap=new Map;const d=this.labelGroup.children;for(let h=0;h<d.length;h++)this.bBoxMap.set(d[h],d[h].getBBox());if(this.props.autoScale){let h=this.curretViewBox;h||(h=o),this.curretViewBox=o,this.scaleLabels(h,!0)}this.props.hideOverlapping&&this.hideOverlappingLabels(this.curretViewBox,!0)}setLabelClass(e,t){e.tagName==="text"&&(e.className.baseVal=t);const s=e.children;for(let a=0;a<s.length;a++)this.setLabelClass(s[a],t)}getLabelLayerElement(){const{triFloorPlan:e,enabled:t,floorPlanLoaded:s}=this.props,{svgElement:a}=e;return!s||!t||!a?null:a.querySelector("#_triLabelLayer")}flatten(e){let t;for(let s=0;s<e.length;s++){const a=e[s];if(a.tagName==="g"&&a.id==="==LabelsLayer"){t=a;break}}if(t){for(let s=0;s<t.children.length;s++){const a=t.children[s];if(a.tagName==="g"){if(a.children.length>0)continue;a.parentNode.removeChild(a)}}return t}}clearLabelsLayer(){const{floorPlanLoaded:e,triFloorPlan:t}=this.props;if(!e)return;const{svgElement:s}=t;if(!s)return;const a=s.querySelector("#_triLabelLayer");a&&(a.innerHTML="")}hideOverlappingLabels(e,t){if(!this.labelGroup||!this.curretViewBox||!e)return;if(!this.props.hideOverlapping){const n=this.labelGroup.children;for(let r=0;r<n.length;r++)n[r].style.display="";return}if(this.curretViewBox.scaleX===e.scaleX&&this.curretViewBox.scaleY===e.scaleY&&t!==!0)return;const s=this.getSvgLabelHeight(),a=this.labelGroup.children,o=[];for(let n=0;n<a.length;n++){const r=this.bBoxMap.get(a[n]),c={bBox:{},label:a[n],isHidden:!1};if(c.bBox.x=r.x,c.bBox.y=r.y,c.bBox.width=r.width,c.bBox.height=r.height,this.props.autoScale){const d=(r.height!==0?s/r.height:1)*this.magnification;c.bBox.width*=d,c.bBox.height*=d}o.push(c)}for(let n=0;n<o.length;n++)if(!o[n].isHidden)for(let r=n+1;r<o.length;r++){if(o[r].isHidden)continue;const c=o[n].bBox,d=o[r].bBox;if(c.x+c.width<d.x||c.y+c.height<d.y||c.x>d.x+d.width||c.y>d.y+d.height){o[r].label.style.display="";continue}o[r].isHidden=!0,o[r].label.style.display="none"}}scaleLabels(e,t){if(!this.labelGroup||!this.labelGroup.parentNode||!e)return;const{triFloorPlan:s,enabled:a,autoScale:o}=this.props,n=s.svgViewPort;if(!a||!n.width||!n.height||this.curretViewBox.scaleX===e.scaleX&&this.curretViewBox.scaleY===e.scaleY&&t!==!0)return;const r=this.labelGroup.children;if(r.length===0)return;const c=this.getSvgLabelHeight(),{svgElement:d}=s,h=[];if(o)for(let g=0;g<r.length;g++){const u=r[g],x=this.bBoxMap.get(u),y=(x.height!==0?c/x.height:1)*this.magnification;let f=d.createSVGTransform(),p=d.createSVGMatrix();p=p.translate(x.x,x.y),p=p.scale(y,y),p=p.translate(-x.x,-x.y),f.setMatrix(p),h.push(f)}const m=this.labelGroup.parentNode;m.removeChild(this.labelGroup);for(let g=0;g<r.length;g++){const u=r[g];u.transform.baseVal.clear(),o&&u.transform.baseVal.appendItem(h[g])}m.appendChild(this.labelGroup)}getSvgLabelHeight(){const{triFloorPlan:e}=this.props,{svgElement:t}=e,s=t.getScreenCTM().inverse(),o=t.createSVGPoint().matrixTransform(s),n=t.createSVGPoint();return n.y=this.textPixelHeight,n.matrixTransform(s).y-o.y}};ye.TEXT_PIXEL_HEIGHT=20;ye.type="labels";class Ne extends D{pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t,onLayersChange:s,layerVisibility:a}=this.props;if(!e||!t){this.stop();return}this.onLayersChange=s,this.layerVisibility=a,this.start()}pluginDidRemove(){this.stop()}start(){const{triFloorPlan:e,enabled:t,floorPlanLoaded:s}=this.props,{svgElement:a}=e;if(!s||!t||!a){this.stop();return}const o=a.children;let n=!1;if(this.started===!0){for(let r=0;this.layerVisibility&&r<this.layerVisibility.length;r++)!this.layerVisibility[r].loaded&&this.layerVisibility[r].visible&&!this.isLayerLoaded(o,this.layerVisibility[r].name)&&(this.addLayer(a,this.layerVisibility[r].name),this.layerVisibility[r].loaded=!0,n=!0);for(let r=0;r<o.length;r++){const c=o[r];if(c.tagName==="g"&&!(c.children===null||c.children.length===0)){for(let d=0;this.layerVisibility&&d<this.layerVisibility.length;d++)if(this.layerVisibility[d].name&&(this.layerVisibility[d].name===c.id||this.layerVisibility[d].name.includes("|")&&this.layerVisibility[d].name.endsWith(c.id))){this.layerVisibility[d].loaded=!0,c.style.display=this.layerVisibility[d].visible===!1?"none":"";break}}}this.onLayersChange&&n&&this.onLayersChange(this.layers);return}this.triFloorPlan=e,this.loadLayers(),this.started=!0}isLayerLoaded(e,t){for(let s=0;s<e.length;s++)if(e[s].id===t)return!0;return!1}stop(){this.started=!1,this.triFloorPlan=null}async loadLayers(){const e=this.triFloorPlan.floorPlanId;let t=null;try{t=await ie.getLayers(e)}catch(s){const{onLoadError:a}=this.props;a&&a(s);return}if(this.layers=[],t&&this.onLayersChange){for(let s=0;s<t.length;s++)this.layers.push({loaded:t[s].visible,...t[s]});this.onLayersChange(this.layers)}}async addLayer(e,t){const s=this.triFloorPlan.floorPlanId;try{const a=await ie.getLayer(s,t),o=document.createElement("div"),n="<svg>"+a+"</svg>";o.innerHTML=""+n,Array.prototype.slice.call(o.childNodes[0].childNodes).forEach(function(c){e.appendChild(c)},this)}catch(a){const{onLoadError:o}=this.props;o&&o(a);return}}}Ne.type="Layers";class J extends D{pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t,className:s,useInteractiveLayer:a,highlighted:o}=this.props;if(!e||!t){this.clearAllAttachedClasses();return}(s!==this.lastClassName||a!==this.lastUseInteractiveLayer||o!==this.lastHighlighted)&&(this.lastClassName=s,this.lastUseInteractiveLayer=a,this.lastHighlighted=o,this.updateHighlight())}pluginDidRemove(){this.clearAllAttachedClasses()}clearAllAttachedClasses(){const{floorPlanLoaded:e,triFloorPlan:t,className:s}=this.props;if(!e)return;const{svgElement:a}=t;b.clearAllClasses(s,a)}updateHighlight(){const{highlighted:e}=this.props;this.clearAllAttachedClasses(),e&&(Array.isArray(e)?e.forEach(t=>{this.addHighlightClass(b.getPropValue(t,J.SPACE_ID))}):this.addHighlightClass(b.getPropValue(e,J.SPACE_ID)))}addHighlightClass(e){const{className:t,useInteractiveLayer:s,triFloorPlan:a}=this.props,o=s?a.interactiveMap:a.attachedMap;b.addClass(e,t,o)}}J.type="highlight";class C extends D{constructor(){super(),this.memoizedParsedIcon=Re(e=>{if(e instanceof Object){const t={};return Object.entries(e).forEach((s,a)=>{let[o,n]=s;t[o]=this.parseIcon(n),a===0&&(t.default=t[o])}),t}else return{default:this.parseIcon(e)}}),this.updateSvgIcons=se(()=>{const{triFloorPlan:e,preservePinSizeRatio:t,enabled:s,floorPlanLoaded:a}=this.props,o=e.svgViewPort;if(!s||!a||!o.width||!o.height)return;const n=b.calcSvgScale(e.svgElement,e.svgViewPort,t);n!==this.calculatedScale&&(this.calculatedScale=n,this.pinnedSpaces.forEach(r=>{const c=r.pinIcon;this.scalePinIconSizeAndCenter(c,r,n,this.pinSize,this.centerPoints)}))},20),this.svgContainerTapped=se(e=>{const{enabled:t,floorPlanLoaded:s,onSelectedChange:a}=this.props;if(!t||!s)return;let o=null;const n=e.target.getAttribute(this.idAttribute);n&&e.target.getAttribute("pin")==="true"&&(o=this.pins.find(r=>b.getPropValue(r,C.SPACE_ID)===n),o!=null&&this.props.selected&&b.getPropValue(o,C.SPACE_ID)===b.getPropValue(this.props.selected,C.SPACE_ID)&&(o=null)),a&&a(o)},300,{leading:!0,trailing:!1}),this.idAttribute=C.NAME_PROPERTY,this.calculatedScale=1,this.pinnedSpaces=[]}get pinSize(){return this.props.pinSize!=null?this.props.pinSize:32}get className(){return this.props.className!=null?this.props.className:"pinned"}get selectedClassName(){return this.props.selectedClassName!=null?this.props.selectedClassName:"selected"}pluginDidUpdate(){const{floorPlanLoaded:e,enabled:t}=this.props;if(!e||!t){this.stop();return}this.start()}pluginDidRemove(){this.stop()}get pins(){return this.props.pins!=null?Array.isArray(this.props.pins)?this.props.pins:[this.props.pins]:[]}parseIcon(e){return new DOMParser().parseFromString(e,"application/xml").documentElement}getParsedIcon(e){if(this.props.icon!=null){const t=this.memoizedParsedIcon(this.props.icon),s=t[e];return s??t.default}return null}floorPlanDidResize(){this.updateSvgIcons()}async start(){const{triFloorPlan:e}=this.props;this.addSvgTapListener(),this.centerPoints=await ie.getCenterPoints(e.floorPlanId),e.svgElement&&(e.props.spaceLayer?this.idAttribute=C.EMELEMENT_PROPERTY:this.idAttribute=C.NAME_PROPERTY,(this.props.pins!==this.lastPins||this.props.icon!==this.lastIcon)&&(this.removeAllPins(this.lastPins),this.addAllPins(),this.lastPins=this.props.pins,this.lastIcon=this.props.icon),this.props.selected!==this.lastSelected&&(this.updateSelected(this.props.selected),this.lastSelected=this.props.selected),this.props.svgViewBox!==this.lastSvgViewBox&&(this.updateSvgIcons(),this.lastSvgViewBox=this.props.svgViewBox))}updateSelected(e){e!=null?(!this.lastSelected||b.getPropValue(this.lastSelected,C.SPACE_ID)!==b.getPropValue(e,C.SPACE_ID))&&(this.deselectSvgPin(this.lastSelected),this.selectSvgPin(e)):this.lastSelected!=null&&this.deselectSvgPin(this.lastSelected)}stop(){this.props.floorPlanLoaded?(this.removeSvgTapListener(),this.removeAllPins(this.lastPins)):(this.calculatedScale=1,this.pinnedSpaces=[])}addAllPins(){const{triFloorPlan:e,preservePinSizeRatio:t}=this.props;this.calculatedScale=b.calcSvgScale(e.svgElement,e.svgViewPort,t);const s=this.pins;s&&s.length>0&&this.props.icon!=null&&s.forEach(a=>{this.addPin(a)})}addPin(e){const{triFloorPlan:t}=this.props,s=t.attachedMap.get(b.getPropValue(e,C.SPACE_ID));s?(s.pins||(s.pins=[]),this.addPinToSpace(s,e)):console.log(`Space not found for space id '${b.getPropValue(e,C.SPACE_ID)}'.`)}removeAllPins(e){if(e&&e.length>0){const t=e.length;for(let s=0;s<t;s++)this.removePin(e[s])}}removePin(e){const t=this.pinnedSpaces.find(s=>s.getAttribute(this.idAttribute)===b.getPropValue(e,C.SPACE_ID));if(t!=null&&t&&t.pins&&t.pins.length>0){const s=t.pins.findIndex(a=>b.getPropValue(a,C.SPACE_ID)===b.getPropValue(e,C.SPACE_ID));s!==-1&&(t.pins.splice(s,1),t.pins.length===0&&this.unpinSpace(t))}}addPinToSpace(e,t){this.addSvgPinGroup(e),this.addSvgPinIcon(e,t),e.pins.push(t),e.counter=e.counter?e.counter+1:1}addSvgPinGroup(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.id="svgPinGroup"+e.getAttribute(this.idAttribute),this.props.triFloorPlan.svgElement.appendChild(t),e.svgPinGroup=t}addSvgPinIcon(e,t){const s=this.getParsedIcon(t[C.PIN_TYPE]).cloneNode(!0),a=e.getAttribute(this.idAttribute);s&&(s.setAttribute("id",e.svgPinGroup.id+"Icon"),s.setAttribute("class",this.className),b.setTriRecordIdOnPin(s,a,this.idAttribute),this.scalePinIconSizeAndCenter(s,e,this.calculatedScale,this.pinSize,this.centerPoints,t.location),e.svgPinGroup.appendChild(s),e.pinIcon=s,e.svgElement=this.props.triFloorPlan.svgElement,this.pinnedSpaces.push(e))}unpinSpace(e){e.svgPinGroup&&e.svgElement===this.props.triFloorPlan.svgElement&&this.props.triFloorPlan.svgElement.removeChild(e.svgPinGroup),e.svgPinGroup=null,e.pinIcon=null,e.counter=0,e.pins=null;const t=this.pinnedSpaces.indexOf(e);t!==-1&&this.pinnedSpaces.splice(t,1)}addSvgTapListener(){const e=this.props.triFloorPlan.svgElement;e!==this.lastSvgElement&&this.props.onSelectedChange!=null&&(e!=null&&e.addEventListener("click",this.svgContainerTapped),this.lastSvgElement=e)}removeSvgTapListener(){const e=this.props.triFloorPlan.svgElement;e!=null&&e===this.lastSvgElement&&e.removeEventListener("click",this.svgContainerTapped),this.lastSvgElement=null}selectSvgPin(e){if(!e)return;const t=this.pinnedSpaces.findIndex(s=>s.getAttribute(this.idAttribute)===b.getPropValue(e,C.SPACE_ID));t!==-1&&this.pinnedSpaces[t].pinIcon.classList.add(this.selectedClassName)}deselectSvgPin(e){if(!e)return;const t=this.pinnedSpaces.findIndex(s=>s.getAttribute(this.idAttribute)===b.getPropValue(e,C.SPACE_ID));t!==-1&&this.pinnedSpaces[t].pinIcon.classList.remove(this.selectedClassName)}scalePinIconSizeAndCenter(e,t,s,a,o,n){let r=0,c=0;const d=t.getAttribute(this.idAttribute),h=a*s;if(e.setAttribute("width",h),e.setAttribute("height",h),o&&o[d])r=o[d].x,c=o[d].y;else if(t.points){const m=b.calculateSpaceCentroid(t.points);r=m.x,c=m.y}else{const m=t.getBBox();r=m.x+m.width/2,c=m.y+m.height/2}e.setAttribute("x",r-Math.floor(h/2)),e.setAttribute("y",c-Math.floor(h))}}C.type="pin";C.PIN_TYPE="type";const bt=new Map;function _(l,e){bt.set(l,e)}function Di(l){return bt.get(l)}_(q.type,q);_(de.type,de);_(K.type,K);_(he.type,he);_(Pe.type,Pe);_(ye.type,ye);_(Ne.type,Ne);_(L.type,L);_(J.type,J);_(C.type,C);const Vi={addPlugin:_,getPlugin:Di},We="TriFloorPlan";class vt extends le.PureComponent{constructor(e){super(e),this.state={svgViewBox:null,floorPlanLoaded:!1,loading:!1,floorPlan:null},this.handleViewportChange=se(t=>{if(typeof this.props.onViewportChange=="function"){const s={x:t.x,y:t.y,width:t.scaleX>0?this.svgViewPort.width/t.scaleX:this.svgExtents.width,height:t.scaleY>0?this.svgViewPort.height/t.scaleY:this.svgExtents.height};this.props.onViewportChange(s)}},200),this.floorPlanDidResize=this.floorPlanDidResize.bind(this),this.svgContainerRef=le.createRef(),this.debouncedUpdateSvgStrokeWidths=se(this.updateSvgStrokeWidths.bind(this),100),this.pluginInstances=[]}render(){const{loading:e}=this.state,{className:t}=this.props,s=We+(t?" "+t:"");return e?le.createElement(nt,{className:`${We}__placeholder`}):le.createElement("div",{className:s,ref:this.svgContainerRef})}componentDidMount(){this.getFloorplan(this.props.floorPlanId),this.updatePlugins(this.props.plugins),window.addEventListener("resize",this.floorPlanDidResize),this.resizeObserver=new ResizeObserver(()=>{setTimeout(async()=>{if(!this.state.svgViewBox||this.state.svgViewBox.scaleX===0||this.state.svgViewBox.scaleY===0){const e=this.resetSvgViewBox();this.setState({svgViewBox:e,floorPlanLoaded:!0})}this.floorPlanDidResize()})})}componentDidUpdate(e,t){this.props.floorPlanId!==e.floorPlanId?this.getFloorplan(this.props.floorPlanId):(this.svgViewBox!==t.svgViewBox&&this.updateSvgViewBox(this.svgViewBox),this.updatePlugins(this.props.plugins),!this.floorPlanLoaded&&!this.state.loading&&this.floorPlan!=null&&this.renderFloorplan(this.floorPlan))}get svgViewBox(){return this.state.svgViewBox}set svgViewBox(e){e!==null&&!b.isSvgViewBoxEquals(this.state.svgViewBox,e)&&(this.setState({svgViewBox:e}),this.floorPlanDidPanOrZoom(e))}get floorPlanLoaded(){return this.state.floorPlanLoaded&&this.svgElement!=null}set floorPlanLoaded(e){this.state.floorPlanLoaded!==e&&this.setState({floorPlanLoaded:e})}get floorPlan(){return this.state.floorPlan}set floorPlan(e){this.setState({floorPlan:e})}get floorPlanId(){return this.props.floorPlanId}get svgContainer(){return this.svgContainerRef.current}get attachedMap(){return this.attachedMapInstance===null&&(this.attachedMapInstance=b.createAttachedMap(this.svgElement,this.props.spaceLayer)),this.attachedMapInstance}get interactiveMap(){return this.interactiveMapInstance===null&&(this.interactiveMapInstance=b.createInteractiveMap(this.svgElement,this.props.spaceLayer)),this.interactiveMapInstance}updatePlugins(e){const t=e??[],s=[];this.pluginInstances.forEach(a=>{const o=t.find(n=>n.id===a.id);o!=null?(a.setProps({...o,triFloorPlan:this,floorPlanLoaded:this.floorPlanLoaded,svgViewBox:this.svgViewBox}),s.push(a)):a.pluginDidRemove()}),t.forEach(a=>{if(this.pluginInstances.find(n=>n.id===a.id)==null){let n;if(a.plugin)n=a.plugin;else{const r=Vi.getPlugin(a.type);r!=null&&a.id!=null&&(n=new r)}n&&(n.setProps({...a,triFloorPlan:this,floorPlanLoaded:this.floorPlanLoaded,vgViewBox:this.svgViewBox}),s.push(n))}}),this.pluginInstances=s}reset(){this.svgContainer&&(this.svgContainer.innerHTML=""),this.svgElement=null,this.svgExtents=null,this.svgViewPort=null,this.attachedMapInstance=null,this.interactiveMapInstance=null,this.currentStrokeWidthScale=null,this.initialSvgViewBox=null,this.setState({svgViewBox:null,floorPlanLoaded:!1,floorPlan:null})}getFloorplan(e){setTimeout(async()=>{if(this.reset(),e!==null){this.setState({loading:!0});try{const t=await ie.getFloorplan(e);this.floorPlan=t}catch(t){this.props.onFloorPlanLoadError&&this.props.onFloorPlanLoadError(t)}finally{this.setState({loading:!1})}}})}renderFloorplan(e){this.svgContainer.innerHTML=e,setTimeout(()=>{this.svgElement=this.svgContainer.querySelector("svg"),this.svgElement.setAttribute("preserveAspectRatio","xMidYMid"),this.props.svgAriaLabel&&this.svgElement.setAttribute("aria-label",this.props.svgAriaLabel);const t=this.resetSvgViewBox();this.sortSpaces(this.svgElement),this.setState({svgViewBox:t,floorPlanLoaded:!0}),this.resizeObserver.observe(this.svgElement.parentNode)},1)}resetSvgViewBox(){if(!this.svgElement)return;b.setSvgViewBox(this.svgElement,0,0,0,0),this.svgExtents=b.getSvgExtents(this.svgElement),this.svgViewPort=this.svgElement.getBoundingClientRect();const e=b.createInitialSvgViewBox(this.svgExtents,this.svgViewPort);return this.initialSvgViewBox=e,e}updateSvgViewBox(e){!e||!this.svgElement||!e.scaleX||!e.scaleY||(this.debouncedUpdateSvgStrokeWidths(),b.setSvgViewBox(this.svgElement,e.x,e.y,this.svgViewPort.width/e.scaleX,this.svgViewPort.height/e.scaleY))}updateSvgStrokeWidths(){this.currentStrokeWidthScale=b.updateSvgStrokeWidths(this.svgElement,this.currentStrokeWidthScale)}floorPlanDidResize(){const e=this.svgViewBox;!e||!this.svgElement||!e.scaleX||!e.scaleY||(this.computeCurrentSvgViewBoxScale(),this.debouncedUpdateSvgStrokeWidths(),this.pluginInstances.forEach(t=>t.floorPlanDidResize()))}floorPlanDidPanOrZoom(e){this.pluginInstances.forEach(t=>t.floorPlanDidPanOrZoom(e)),this.handleViewportChange(e)}computeCurrentSvgViewBoxScale(){if(!this.svgElement)return;const e=this.svgViewPort;if(this.svgViewPort=this.svgElement.getBoundingClientRect(),this.svgViewPort.height===0||this.svgViewPort.width===0){this.svgViewPort=e;return}this.svgViewBox=b.computeCurrentSvgViewBoxScale(e,this.svgViewPort,this.svgViewBox),this.initialSvgViewBox=this.svgViewBox}sortSpaces(e){const t=e.querySelectorAll("[tri-record-id].tri-attached");if(!t||t.length<1)return;let s=t[0].parentNode;const a=s.id,o=[];for(let n=0;n<e.childNodes.length;n++)e.childNodes[n].id===a&&o.push(e.childNodes[n]);for(let n=0;n<o.length;n++){const r=[],c=new Map,d=[];s=o[n];const h=s.nextSibling,m=s.parentNode;for(let u=0;u<s.childNodes.length;u++){const x=s.childNodes[u];if(x.tagName==="line")d.push(x);else{let y=0;if(x.getBBox){const p=x.getBBox();y=p.height*p.width}const f=x.getAttribute("tri-record-id");if(f){let p=c.get(f);p||(p={area:0,recordId:f,nodes:[]},c.set(f,p)),y>p.area&&(p.area=y),p.nodes.push({area:y,node:x})}else r.push({area:y,node:x})}}r.sort((u,x)=>x.area-u.area);const g=Array.from(c.values()).sort((u,x)=>x.area-u.area);g.forEach(u=>u.nodes.sort((x,y)=>y.area-x.area)),m.removeChild(s),s.innerHTML="",r.forEach(u=>s.appendChild(u.node)),g.forEach(u=>{u.nodes.forEach(x=>s.appendChild(x.node))}),d.forEach(u=>s.appendChild(u)),h?m.insertBefore(s,h):m.appendChild(s)}}}vt.propTypes={className:Y.string,floorPlanId:Y.number.isRequired,onFloorPlanLoadError:Y.func,onViewportChange:Y.func,plugins:Y.array,spaceLayer:Y.string,svgAriaLabel:Y.string};const zi=[{id:111,type:q},{id:222,type:de.type},{id:333,type:J.type}],Le=({floorPlanId:l})=>i.jsx(vt,{floorPlanId:l,plugins:zi}),Oi=({visible:l,description:e,activeModal:t,onHide:s=O,onAdd:a=O})=>{const[o,n]=w.useState(!1),[r,c]=w.useState({}),[d,h]=w.useState([]),[m,g]=w.useState([]),u=async()=>{const v=await appModel.getRecord("lookupBuilding");h(v.data),g(["building","buildingId","property"])},x=async()=>{const v=t.buildingId,j=await appModel.getRecord(`lookupBuilding/${v}/buildingFloors`);h(j.data),g(["building","floor","id"])},y=async()=>{const{buildingId:v,floorId:j}=t,G=await appModel.getRecord(`lookupBuilding/${v}/buildingFloors/${j}/floorRooms`);h(G.data),g(["space","occupancyStatus","spaceClass"])},f=v=>{n(!0),c(v)};w.useEffect(()=>{switch(t.label){case"Building":u();break;case"Floor":x();break;case"Space":y();break}},[t]);const p=({header:v,description:j,settings:G=!1})=>i.jsxs("div",{className:"flex justify-between bg-blue-50 rounded-t-xl",children:[i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-sm mb-2",children:v}),i.jsx("p",{className:"text-xs",children:j})]}),G&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(E,{icon:"pi pi-download",text:!0,size:"small"}),i.jsx(it,{value:"Revision in progress"}),i.jsx(E,{icon:"pi pi-angle-right",text:!0,size:"small",onClick:()=>n(!1)})]})]});return i.jsx(W,{position:"right",visible:l,onHide:s,draggable:!1,resizable:!1,blockScroll:!0,className:"h-screen w-full lg:max-w-4/5 ux-dual-modal",children:i.jsx("div",{className:"w-full h-full",children:i.jsxs("div",{className:N("lg:grid grid-cols-2 h-full",{"gap-4":o}),children:[i.jsxs("div",{className:N("bg-white rounded-xl shadow-lg transform transition",{"translate-x-0":o,"translate-x-full":!o}),children:[i.jsx(p,{header:"FL Complex",description:"ID-BLDJK123",settings:!0}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-xl my-4 ",children:"General Info"}),i.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(r).map(([v,j])=>i.jsxs("div",{className:N({"col-span-3":v==="description"}),children:[i.jsx("label",{className:"text-xs text-gray-500",htmlFor:v,children:v}),i.jsx("p",{className:"text-sm",children:j})]},v))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg z-10",children:[i.jsx(p,{header:`Select ${t.label} (${d.length})`,description:e}),i.jsxs(z,{value:d,size:"small",paginator:!0,rows:5,rowsPerPageOptions:[5,10,25,50],className:"text-xs mb-8",tableStyle:{minWidth:"50rem"},children:[m.map(v=>i.jsx(S,{field:v,className:"truncate max-w-4",header:at(v)},v)),i.jsx(S,{style:{width:"5rem"},body:v=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx(E,{label:"View",size:"small",outlined:!0,onClick:()=>f(v)}),i.jsx(E,{label:"Add",size:"small",onClick:()=>a(t.label,v)})]})})]})]})]})})})},_i=[{type:"multiselect",label:"Building",fieldKey:"building",className:"w-full md:w-1/3 md:inline-block md:mr-8"},{type:"multiselect",label:"Floor",fieldKey:"floor",className:"w-full md:w-1/3 md:inline-block md:mr-8"},{type:"multiselect",label:"Room",fieldKey:"room",className:"w-full md:w-1/3 md:inline-block md:mr-8"},{type:"text",label:"Issue Types *",fieldKey:"issueType",className:"w-full md:w-1/3 md:inline-block",placeholder:"Search by issue name"}],Hi=[{header:"Declare Request Type",description:"Here you will specify whether the request is for yourself or for someone else.",controls:[{type:"radio",value:"forMe",label:"Request if for *",icon:!1,values:[{name:"For me",key:"ME"},{name:"For someone else",key:"ELSE"}]},{type:"dropdown",label:"Search by Employee Name or ID",className:"w-full md:w-1/3 md:inline-block md:mr-8",placeholder:"Select employee name",filter:!0,values:[],id:"searchByEmp",filter:!0}]},{header:"Declare Request Type",description:"Here you will specify whether the request is for yourself or for someone else.",controls:[{type:"checkbox",values:[{name:"Emergency immediate service required",key:"EIS"},{name:"Another",key:"ABS"}]},{type:"radio",value:"forMe",label:"Select Building",fieldKey:"selectBuilding",icon:!1,values:[{name:"QR Code",key:"QR"},{name:"Select from floor plan",key:"FP"},{name:"Manual selection",key:"MS"}]}]}],qi=({schema:l})=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"bg-gray-100 rounded-xl p-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("h3",{className:"font-semibold",children:"Fetched Information"}),i.jsx(E,{label:"Re-Scan QR",className:"underline underline-offset-4",text:!0,size:"small"})]}),l.map(e=>w.createElement(k,{...e,key:e.id}))]}),i.jsxs("div",{className:"mt-4 mb-4",children:[i.jsx("h3",{className:"mb-4",children:"Select Issue Type*"}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(tt,{iconPosition:"left",className:"w-full max-w-96",children:[i.jsx(st,{className:"pi pi-search"}),i.jsx(et,{placeholder:"Search by issue type"})]}),i.jsx(E,{label:"Download",icon:"pi pi-download",iconPos:"right",size:"small",outlined:!0})]})]}),i.jsxs(z,{value:me,size:"small",paginator:!0,rows:5,rowsPerPageOptions:[5,10,25,50],className:"text-sm mb-8",tableStyle:{minWidth:"50rem"},children:[i.jsx(S,{field:"code",header:"Code"}),i.jsx(S,{field:"name",header:"Name"}),i.jsx(S,{field:"category",header:"Category"}),i.jsx(S,{field:"quantity",header:"Quantity"})]}),i.jsx(k,{type:"textarea",className:"max-w-96",label:"Request Description",placeholder:"Add the description about this request"})]}),Wi=()=>{const{state:l,setState:e}=w.useContext(U),t=ce(Hi),s=ce(_i),[a,o]=w.useState(t),[n,r]=w.useState({}),[c,d]=w.useState({}),h=y=>{const{value:f,target:p}=y;o(we(a,p.id,f)),r(f)},m=(y,f)=>()=>{e({...l,[y]:f})},g=y=>f=>{m("selectViewModal",!0)(),d({...c,...y})},u=async()=>{const y=await appModel.getRecord("peopleRecords",{filters:[{name:"recordForm",operator:"in",value:["Employee","Consultant"]}]}),f=be(a,"searchByEmp");f.values=y.data,o([...a])},x=(y,f)=>{m("selectViewModal",!1)();const p=ts(y)+"Id";d({...c,[p]:f._id})};return w.useEffect(()=>{u()},[]),i.jsxs(ue,{header:"Move Services",children:[i.jsx(A,{formSchema:a,onChange:h,classNameFn:(y,f)=>N("mb-4 mt-8",{"border-b border-gray-200":f})}),i.jsxs(Z,{test:n.key,children:[i.jsx(qi,{type:"QR",schema:s}),i.jsx("div",{className:"",type:"FP",children:i.jsx(Le,{floorPlanId:1158})}),i.jsx("div",{className:"",type:"MS",children:ms.map(y=>i.jsx("span",{onClick:g(y),children:i.jsx(k,{...y})},y.label))})]}),i.jsx(Oi,{activeModal:c,header:c.modalHeader,description:c.modalDesc,visible:l.selectViewModal,onHide:m("selectViewModal",!1),onAdd:x})]})};class te{static get LOG(){return"log"}static get INFO(){return"info"}static get WARN(){return"warn"}static get ERROR(){return"error"}set enabled(e){this.__isEnabled=e}constructor(){this.__isEnabled=!0}__prefixTime(){const e=new Date;return e.toLocaleTimeString()+"."+e.getMilliseconds()}__logMessage([e,...t]){if(!this.__isEnabled)return;const s=this.__prefixTime();window.console[e].apply(window.console,[s,...t])}log(...e){this.__logMessage([te.LOG,...e])}info(...e){this.__logMessage([te.INFO,...e])}warn(...e){this.__logMessage([te.WARN,...e])}error(...e){this.__logMessage([te.ERROR,...e])}}const fe=new te;class Ui{constructor(){this.headers=new Map,this.controller=new AbortController,this._response={message:"",status:"",data:[]},this.headers.set("Content-Type","application/json")}setAccessTokenHeaders(){const e=localStorage.getItem("jwt");e!==null&&this.headers.set("Authorization",`Bearer ${e}`)}abortRequest(){fe.info("All ajax calls aborted ",this.controller),this.controller.abort()}getHeaders(){const e={};for(let[t,s]of this.headers)e[t]=s;return e}get(e,t){return this.fireRequest(e,t)}post(e,t){return this.fireRequest(e,{method:"POST",...t})}put(e,t){return this.fireRequest(e,{method:"PUT",...t})}delete(e,t){return this.fireRequest(e,{method:"DELETE",...t})}patch(e,t){return this.fireRequest(e,{method:"PATCH",...t})}fireRequest(e,t={}){const{headers:s={},body:a,...o}=t;this.setAccessTokenHeaders();const n=this.controller.signal,r={...s,...this.getHeaders()},c=a?JSON.stringify(a):null,d={...o,headers:r,body:c,signal:n},h=/\.json$/.test(e)?"/app/myFirstApp":"";return new Promise((m,g)=>{fetch(h+e,d).then(u=>this.__parseResponse(u)).then(u=>this.__handleResponse(u,m)).then(u=>this.__storeTokenInfo(u)).catch(u=>this.__handleError(u,g))})}__storeTokenInfo(e){if(e.jwt){const{user:t,jwt:s}=e;localStorage.setItem("jwt",s),localStorage.setItem("user.email",t.email),localStorage.setItem("user.id",t.id),localStorage.setItem("user.username",t.username)}return e}__parseResponse(e){const{statusText:t,status:s}=e;return this._response={...this._response,message:t,status:s},fe.log("Ajax __parseResponse:",{status:s,statusText:t}),e.json()}__handleResponse(e,t){return fe.log("Ajax __handleResponse:",e),t(e),e}__handleError(e,t){return fe.error("Ajax __handleError:",e),t(e),e}}const Gi=new Ui,Ue=()=>{const l=w.useRef(null),e=Qe(),t=[{label:"Username",placeholder:"Enter username",type:"text",icon:"pi pi-user",name:"userName"},{label:"Password",placeholder:"Enter password",type:"password",icon:"pi pi-key",name:"password"}],[s,a]=w.useState({userName:"",password:""}),o=r=>{const{name:c,value:d}=r.target;a({...s,[c]:d})},n=r=>{r.preventDefault(),Gi.post("/p/websignon/signon",{body:s}).then(()=>e("/dashboard")).catch(()=>{l.current&&(l.current.clear(),l.current.show([{sticky:!0,severity:"error",summary:"Error",detail:"Invalid username or password."}]))})};return i.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:i.jsxs("div",{className:"-mt-16",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("img",{src:"qawm-logo.png",className:"w-32 h-32"})}),i.jsx(Je,{ref:l,className:"my-2"}),i.jsx(_t,{title:"Login",className:"rounded-xl w-full md:w-112 px-8 py-4",subTitle:"Enter credentials to login",children:i.jsxs("form",{onSubmit:n,children:[i.jsx("div",{className:"mb-8",children:t.map(r=>w.createElement(k,{...r,key:r.label,className:"mb-4",onChange:o}))}),i.jsx(E,{label:"Submit",type:"submit",className:"w-full"})]})})]})})},Yi=[{type:"dropdown",label:"Building *",id:"buildingList",className:"w-full lg:w-1/3 lg:inline-block",placeholder:"Select the reason",values:[]},{type:"dropdown",label:"Floor *",id:"floorList",className:"w-full lg:w-1/3 lg:inline-block lg:ml-8",placeholder:"Select the reason",values:[]},{type:"dropdown",label:"Space *",id:"spaceList",className:"w-full lg:w-1/3 lg:inline-block",placeholder:"Select the reason",values:[]}],$i=[{header:"Move - To Location",description:"Here you will specify the required information to move.",controls:[{type:"radio",label:"Select Building",id:"selectBuilding",values:[{name:"QR Code",key:"QR"},{name:"Select from floor plan",key:"FP"},{name:"Manual selection",key:"MS"}]}]}],Ge=({header:l,description:e,onChange:t=O,value:s={building:null,floor:null,space:null}})=>{const a=ce([{header:l,description:e,controls:Yi}]),[o,n]=w.useState(a),[r,c]=w.useState(s),d=(x,y,f)=>{const p=be(o,y);p&&(p.values=x.data.map(v=>({...v,id:v._id,name:v[f]})),n([...o]))},h=async()=>{const x=await appModel.getRecord("lookupBuilding");d(x,"buildingList","building")},m=async x=>{const y=await appModel.getRecord(`lookupBuilding/${x}/buildingFloors`);d(y,"floorList","floor")},g=async(x,y)=>{const f=await appModel.getRecord(`lookupBuilding/${x}/buildingFloors/${y}/floorRooms`);d(f,"spaceList","space")},u=x=>{const{value:y,target:f}=x;n(we(o,f.id,y)),f.id==="buildingList"&&(c({...r,building:y}),m(y._id)),f.id==="floorList"&&(c({...r,floor:y}),g(r.building._id,y._id)),t(r)};return w.useEffect(()=>{h()},[]),i.jsx(A,{formSchema:o,onChange:u})},Xi=[{header:"Declare Request Type",description:"Here you will specify whether the request is for yourself or for someone else.",controls:[{type:"radio",value:"forMe",label:"Request if for *",values:[{name:"For me",key:"ME"},{name:"For someone else",key:"ELSE"}]}]},{header:"Move Details",description:"Here you will specify the required information to move",controls:[{type:"dropdown",label:"Reason for Moving",id:"reasonForMoving",className:"w-full md:w-1/3 md:inline-block",placeholder:"Select the reason",values:[]},{type:"calendar",label:"Proposed Move Date",className:"w-full md:w-1/3 md:inline-block md:ml-8",placeholder:"Select Date"}]}],Zi=()=>{const{state:l,setState:e}=w.useContext(U),[t,s]=w.useState(0),[a,o]=w.useState({}),n=ce(Xi),r=ce($i),[c,d]=w.useState(r),[h,m]=w.useState(n),g=f=>{const{value:p,target:v}=f;d(we(r,v.id,p)),v.id==="selectBuilding"&&o(p),console.log(p,v)},u=["Request & Add Contacts","Move details","Add Issue Type & Description"].map(f=>({label:f})),x=async()=>{const f=await appModel.getRecord("moveReasons"),p=be(h,"reasonForMoving");p&&(p.values=f.data),m([...h])},y=f=>{console.log("moveChaneg  === ",f)};return w.useEffect(()=>{x()},[]),i.jsxs(ue,{header:"Move Services",children:[i.jsx(Ce,{model:u,className:"ux-steps mr-4",activeIndex:t,onSelect:f=>s(f.index),readOnly:!1}),i.jsxs(Z,{test:t,children:[i.jsx("div",{className:"",type:0,children:i.jsx(A,{formSchema:h,onChange:console.log,classNameFn:(f,p)=>N("mb-4 mt-8",{"border-b border-gray-200":p})})}),i.jsxs("div",{className:"",type:1,children:[i.jsx(Ge,{header:"Move - From Location",description:"Here you will see the from location for the move request.",onChange:y}),i.jsx(A,{formSchema:c,onChange:g,classNameFn:(f,p)=>N("mb-4 mt-8",{"border-b border-gray-200":p})}),i.jsxs(Z,{test:a.key,children:[i.jsx("div",{className:"",type:"QR",children:a.name}),i.jsx("div",{className:"",type:"FP",children:i.jsx(Le,{floorPlanId:1158})}),i.jsx("div",{className:"",type:"MS",children:i.jsx(Ge,{onChange:y})})]})]}),i.jsxs("div",{className:"",type:2,children:["Add Issue Type and description ",t]})]})]})},Ki=({visible:l,onHide:e=R.noop})=>{const t=[{required:!0,type:"text",label:"Current Password",placeholder:"Enter your current password"},{required:!0,type:"text",label:"New Password",placeholder:"Enter your new password"},{required:!0,type:"text",label:"Confirm New Password",placeholder:"Enter your new password"}],s=a=>{console.log("change ",a)};return i.jsxs(W,{header:"Change Password",visible:l,position:"right",className:"h-screen w-full max-w-[32rem]",onHide:e,draggable:!1,resizable:!1,children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 mb-8",children:t.map((a,o)=>i.jsx("div",{className:"text-sm [&*]:text-sm",children:i.jsx(k,{...a,onChange:s})},o))}),i.jsxs("div",{className:"mt-4 bg-gray-100 rounded-lg p-4",children:[i.jsx("p",{className:"font-semibold text-gray-700 mb-4",children:"Your Password Must Contains"}),i.jsxs("ul",{className:"list-disc text-sm pl-4 mb-4",children:[i.jsx("li",{children:"Have minimum 6 to maximum 20 characters"}),i.jsx("li",{children:"Not match previous 6 passwords"}),i.jsx("li",{children:"Include at least one lowercase"}),i.jsx("li",{children:"Include at least one uppercase"})]}),i.jsx("p",{className:"font-semibold text-gray-700 mb-4",children:"Your Password Must also include any 1 of the following:"}),i.jsxs("ul",{className:"list-disc text-sm pl-4 mb-4",children:[i.jsx("li",{children:"At least one numeric character"}),i.jsx("li",{children:"At least one special character"})]})]})]})},Ji=({visible:l,onHide:e=R.noop,onSubmit:t=R.noop})=>i.jsx(W,{header:i.jsx(pe,{header:"Add Comments",description:"Record Name: 1000140-10"}),footer:i.jsx(E,{label:"Add Comments",rounded:!0,size:"small",onClick:t}),visible:l,position:"right",className:"h-screen w-full max-w-[32rem] ux-notification-modal",onHide:e,draggable:!1,resizable:!1,children:i.jsx(k,{type:"textarea",label:"Comment *",placeholder:"Add"})}),Qi=({items:l,value:e,visible:t,onHide:s=R.noop,onChange:a=R.noop})=>i.jsx(W,{header:"Notification",visible:t,position:"right",className:"h-screen w-full max-w-[32rem] ux-notification-modal",onHide:s,draggable:!1,resizable:!1,children:i.jsx(Ze,{value:e,onChange:a,options:l,optionLabel:"name",itemTemplate:o=>i.jsxs("div",{className:"flex align-center border-b border-gray-200 pb-4",children:[i.jsx("img",{alt:o.label,src:"https://picsum.photos/30/30",className:"rounded-full mr-2 w-9"}),i.jsxs("div",{className:"flex flex-col pl-2",children:[i.jsx("span",{className:"text-sm",children:o.label}),i.jsx("span",{className:"text-xs",children:o.date})]})]}),className:"ux-find-listbox"})}),ea=({value:l,visible:e,onHide:t=R.noop,onChange:s=R.noop})=>{const[a,o]=w.useState(l),n=r=>c=>{const d=a.map(h=>(h.id===r.id&&(h.enabled=c.value),h));o(d),s(r)};return i.jsxs(W,{header:"Personalization",visible:e,position:"right",className:"h-screen w-full max-w-112",onHide:t,draggable:!1,resizable:!1,children:[i.jsx("h3",{className:"text-black mb-2",children:"Widgets"}),i.jsx("p",{className:"text-sm text-gray-500",children:"You cannot select more than 4 widgets"}),i.jsx("div",{className:"mt-4",children:i.jsx(Ht,{dataKey:"id",className:"ux-perslist",value:a,onChange:r=>o(r.value),itemTemplate:r=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm flex items-center",children:[i.jsx("span",{className:"-ml-2 mr-2 text-gray-300",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"currentColor",children:i.jsx("path",{d:"M360-160q-33 0-56.5-23.5T280-240q0-33 23.5-56.5T360-320q33 0 56.5 23.5T440-240q0 33-23.5 56.5T360-160Zm240 0q-33 0-56.5-23.5T520-240q0-33 23.5-56.5T600-320q33 0 56.5 23.5T680-240q0 33-23.5 56.5T600-160ZM360-400q-33 0-56.5-23.5T280-480q0-33 23.5-56.5T360-560q33 0 56.5 23.5T440-480q0 33-23.5 56.5T360-400Zm240 0q-33 0-56.5-23.5T520-480q0-33 23.5-56.5T600-560q33 0 56.5 23.5T680-480q0 33-23.5 56.5T600-400ZM360-640q-33 0-56.5-23.5T280-720q0-33 23.5-56.5T360-800q33 0 56.5 23.5T440-720q0 33-23.5 56.5T360-640Zm240 0q-33 0-56.5-23.5T520-720q0-33 23.5-56.5T600-800q33 0 56.5 23.5T680-720q0 33-23.5 56.5T600-640Z"})})}),i.jsx("span",{className:"font",children:r.name})]}),i.jsx(Xe,{className:"ux-perswitch",checked:r.enabled,onChange:n(r)})]}),dragdrop:!0})})]})},ta=({items:l,visible:e,onHide:t=R.noop,onChange:s=R.noop})=>{const a=Array.from({length:10}).map((o,n)=>++n);return i.jsxs(W,{header:i.jsx(pe,{header:"Servey Question",description:"Click add button to add the building details"}),visible:e,position:"right",className:"h-screen w-full max-w-[40rem] ux-modal",onHide:t,draggable:!1,resizable:!1,blockScroll:!0,children:[i.jsxs("div",{className:"py-4",children:[i.jsx("p",{className:"text-xs text-gray-400 font-normal",children:"Servey Name"}),i.jsx("h3",{children:"Servey number 1"})]}),l.map(o=>i.jsxs(Ke,{header:o,className:"ux-servey-panel",children:[i.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-4",children:a.map(n=>i.jsx(E,{label:n,outlined:!0,size:"small",onClick:()=>s(item,n)},n))}),i.jsxs("div",{className:"flex justify-between text-xs mt-4 mr-6",children:[i.jsx("span",{children:"Not at all likely"}),i.jsx("span",{children:"Extremely likely"})]})]},o))]})};class sa{constructor(){V(this,"changePassword");V(this,"persModal");V(this,"notifyModal");V(this,"serveyModal");V(this,"commentModal");V(this,"sidebarModal");V(this,"timelineModal");V(this,"contactModal");V(this,"selectViewModal");V(this,"findTask");this.changePassword=!1,this.persModal=!1,this.notifyModal=!1,this.serveyModal=!1,this.commentModal=!1,this.sidebarModal=!1,this.timelineModal=!1,this.contactModal=!1,this.selectViewModal=!1,this.findModal=!1,this.findTask=!1}}const ia=[{type:"dropdown",label:"Select By Building Name Or City *",placeholder:"Select",id:"selectBuilding",className:"w-full md:w-1/2",filter:!0},{type:"dropdown",placeholder:"Select",label:"Select Floor",id:"selectFloor",filter:!0},{type:"dropdown",placeholder:"Select",label:"Room Name Or Number",id:"selectRoom",filter:!0}],St=({items:l=[]})=>i.jsx("div",{className:"rounded border border-gray-200 p-2 mb-4",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map((e,t)=>i.jsxs("div",{className:"flex items-center",children:[e.icon&&i.jsx("div",{className:"bg-blue-100 rounded px-4 w-10 h-10 flex items-center justify-center",children:i.jsx("i",{className:N("text-lg",e.icon)})}),i.jsxs("div",{className:"pl-2",children:[i.jsx("p",{className:"text-sm",children:e.label}),i.jsx("span",{className:"text-xs text-gray-400",children:e.desc})]})]},t))})}),aa=()=>{const[l,e]=w.useState(ia),[t,s]=w.useState(),[a,o]=w.useState([]),n=async h=>{const{value:m,target:g}=h;if(l.find(u=>u.id===g.id).value=m,g.id==="selectBuilding"){const u=await c(m._id);l.find(x=>x.id==="selectFloor").values=u,s(m)}if(g.id==="selectFloor"){const u=l.find(y=>y.id==="selectBuilding").value._id,x=await d(u,m._id);l.find(y=>y.id==="selectRoom").values=x}e([...l])};async function r(){try{const m=((await appModel.getRecord("lookupBuilding")).data??[]).map(u=>({...u,name:`${u.building} (${u.property})`})),g=l.find(u=>u.id==="selectBuilding");g.values=m,e([...l])}catch(h){console.error("Error fetching buildings:",h)}}w.useEffect(()=>{r()},[]);const c=async h=>{try{return(await appModel.getRecord(`lookupBuilding/${h}/buildingFloors`)).data.map(g=>({...g,name:`Floor ${g.level}: ${g.floor}`}))}catch(m){console.error("Error fetching floors:",m)}},d=async(h,m)=>{try{return(await appModel.getRecord(`lookupBuilding/${h}/buildingFloors/${m}/floorRooms`)).data.map(u=>({...u,name:u.space}))}catch(g){console.error("Error fetching rooms:",g)}};return Array.from({length:3}).map((h,m)=>({label:"Allen Manager",desc:"Finance Demo",icon:"pi pi-user"})),w.useEffect(()=>{t&&o([{icon:"pi pi-building"},{label:"Building Name",desc:t.buildingId},{label:"Building ID",desc:t.buildingName}])},[t]),i.jsxs("div",{children:[i.jsx(k,{...l[0],onChange:n}),t&&i.jsx(St,{items:a}),i.jsx("div",{className:"grid grid-cols-2 gap-4",hidden:!t,children:l.slice(1).map(h=>w.createElement(k,{...h,key:h.id,onChange:n}))})]})},la=()=>{const[l,e]=w.useState([]),[t,s]=w.useState(),[a,o]=w.useState([]),n=async()=>{const r=await appModel.getRecord("peopleRecords");e(r.data)};return w.useEffect(()=>{n()},[]),w.useEffect(()=>{t&&o([{label:t.name,desc:t.organization,icon:"pi pi-user"},{label:`Phone: ${t.workPhone}`,desc:`Email ID: ${t.email}`,icon:"pi pi-id-card"},{label:t.building,desc:t.space,icon:"pi pi-building"}])},[t]),i.jsxs("div",{children:[i.jsx(k,{filter:!0,value:t,type:"dropdown",values:l,className:"max-w-96",onChange:r=>s(r.value),label:"Search by Person's name *",placeholder:"Search by persons name"}),t&&i.jsx(St,{items:a}),i.jsxs(oe,{hidden:!t,children:[i.jsx(I,{header:"Location",children:i.jsx(Le,{floorPlanId:1158})}),i.jsxs(I,{header:"Floor Directory",children:[i.jsx(k,{type:"text",className:"mb-4 w-84",placeholder:"Search by Employee, Room, Job Title"}),i.jsxs(z,{value:me.slice(0,-2),size:"small",children:[i.jsx(S,{field:"code",header:"Code"}),i.jsx(S,{field:"name",header:"Name"}),i.jsx(S,{field:"category",header:"Category"}),i.jsx(S,{field:"quantity",header:"Quantity"})]})]})]})]})},oa=({visible:l,onHide:e=R.noop,onSubmit:t=R.noop})=>{const[s,a]=w.useState({label:"Person"}),o=(c,d)=>i.jsx(E,{className:"ux-find-tabs",icon:c.icon,label:c.label,onClick:d.onClick,outlined:c.label!==s.label}),n=w.useCallback(c=>{a(c.item)},[]),r=[{label:"Person",icon:"pi pi-user",template:o,command:n},{label:"Room",icon:"pi pi-home",template:o,command:n}];return i.jsx(W,{header:i.jsx(pe,{header:"Find",description:"Person & Room"}),visible:l,position:"right",className:"h-screen w-full max-w-[64rem]",onHide:e,draggable:!1,resizable:!1,children:i.jsxs("div",{className:"flex h-full",children:[i.jsx("div",{className:"bg-gray-100 p-2",children:i.jsx(qt,{className:"ux-find-menu",model:r})}),i.jsx("div",{className:"flex-1 p-4",children:i.jsxs(Z,{test:s.label,children:[i.jsx(la,{type:"Person"}),i.jsx(aa,{type:"Room"})]})})]})})},na=()=>{const[l,e]=w.useState(new sa),t=cs.map((o,n)=>({name:o,enabled:n<4,id:n})),s=ot(rs,o=>{console.log("clicked ",o.item),e({...l,[o.item.key]:!0})}),a=(o,n)=>()=>{e({...l,[o]:n})};return i.jsxs(U.Provider,{value:{state:l,setState:e},children:[i.jsxs("div",{className:"flex",children:[i.jsxs("div",{className:"min-h-screen bg-gray-50 hidden md:block ",children:[i.jsx("div",{className:"flex justify-center py-2",children:i.jsx("img",{src:"qawm-logo.png",className:"h-16 w-16"})}),i.jsx(Fe,{model:s,breakpoint:"767px",className:"ux-sidebar flex-1"}),i.jsx(Wt,{target:".p-menuitem"})]}),i.jsx("div",{className:"flex-1 min-h-screen bg-gray-200",children:i.jsx(Ut,{})})]}),i.jsx(Gt,{style:{width:"15rem"},header:()=>i.jsxs("div",{className:"flex justify-center items-center py-2",children:[i.jsx("img",{src:"qawm-logo.png",className:"h-8 w-8"}),i.jsx("span",{className:"font-semibold ml-2 text-sm",children:"QAWM UX App"})]}),className:"ux-mobile-sidebar",visible:l.sidebarModal,onHide:a("sidebarModal",!1),children:i.jsx(Fe,{model:s,breakpoint:"767px"})}),i.jsx(ea,{value:t,visible:l.persModal,onHide:a("persModal",!1),onChange:console.log}),i.jsx(Ki,{visible:l.changePassword,onHide:a("changePassword",!1)}),i.jsx(Qi,{items:Se,onChange:console.log,visible:l.notifyModal,onHide:a("notifyModal",!1)}),i.jsx(ta,{items:hs,onChange:console.log,visible:l.serveyModal,onHide:a("serveyModal",!1)}),i.jsx(Ji,{items:Se,onChange:console.log,visible:l.commentModal,onHide:a("commentModal",!1)}),i.jsx(oa,{items:Se,onChange:console.log,visible:l.findModal,onHide:a("findModal",!1)})]})},Ae="triWebContextId",ra="Content-Type",ca="countOnly",da="query",ha="actionGroup",ma="action",pa="refresh",Ye="type",$e="method",ua="multiContextIds",ga="reserveIncludeUnavailable",fa="/p/webapi/noop",xa="/p/webapi/rest/v2",ya="/p/webapi/end",P={GET:"GET",CREATE:"CREATE",DELETE:"DELETE",SAVE:"SAVE",ADD:"ADD",REMOVE:"REMOVE",GET_QUERY_METADATA:"GET_QUERY_METADATA"};let Q=null,ee=null;function xe(l,e,t){this.responseStatus=l,this.responseError=e,this.error=t}async function ae(l,e){if(e!=null){const t=e.headers.get("Content-Type");let s=null;if(t!=null&&t.indexOf("application/json")>=0)try{s=await e.json()}catch{s=null}return new xe(e.status,s,l)}else return l instanceof xe?l:new xe(-1,null,l)}async function Me(){if(Q!=null)return Q;if(ee!=null)return ee;ee=(async()=>{const l={method:"GET",cache:"no-cache",credentials:"include"},e=new Request(`${B().tririgaUrl}${fa}`,l),t=await fetch(e);if(!t.ok)throw await ae(null,t);return t.headers.get(Ae)})();try{return Q=await ee,Q}catch(l){throw Q=null,ee=null,await ae(l)}}async function wa(){const l=await Me();if(l!=null)try{const e={method:"GET",cache:"no-cache",headers:{},credentials:"include"};e.headers[Ae]=l;const t=new Request(`${B().tririgaUrl}${ya}`,e),s=await fetch(t);if(!s.ok)throw await ae(null,s)}catch(e){throw Q=null,ee=null,await ae(e)}}async function ba(l){try{const e=await va(l),t=await fetch(e);if(!t.ok)throw await ae(null,t);return await t.json()}catch(e){throw await ae(e)}}async function va(l){const{modelAndViewName:e,instanceId:t,context:s,type:a,query:o,data:n,actionGroup:r,action:c,wfParametersMap:d,multiContextIds:h,refresh:m=!1,countOnly:g=!1,reserveIncludeUnavailable:u=!1}=l,x=await ja();x.method=Sa(a,o),x.body=Ea(a,o,n,d),x.headers[ra]=Pa(a,o);const y=Na(e,t,s,a,r,c,o,h,m,g,u);return new Request(y,x)}function Sa(l,e){let t;switch(l){case P.GET:e!=null?t="POST":t="GET";break;case P.SAVE:case P.ADD:case P.REMOVE:t="PUT";break;case P.CREATE:case P.DELETE:t="POST";break;case P.GET_QUERY_METADATA:t="GET";break}return t}function Ea(l,e,t,s){let a=null;switch(l){case P.GET:{e!=null&&(a=JSON.stringify(e));break}case P.CREATE:case P.DELETE:case P.SAVE:case P.ADD:case P.REMOVE:{const o={data:t};e!=null&&(o.query=e),s!=null&&(o.wfParametersMap=s),a=JSON.stringify(o);break}}return a}function Pa(l,e){let t="";switch(l){case P.GET:e!=null&&(t="application/json");break;case P.CREATE:case P.SAVE:case P.ADD:case P.REMOVE:case P.DELETE:t="application/json";break}return t}async function ja(){const l=await Me(),e={cache:"no-cache",headers:{},credentials:"include"};return e.headers[Ae]=l,e}function Na(l,e,t,s,a,o,n,r,c,d,h){const m=new URL(`${location.origin}${xa}/${l}/${e}/${t}`);switch(s){case P.CREATE:case P.SAVE:case P.ADD:case P.REMOVE:case P.DELETE:a!=null&&m.searchParams.set(ha,a),o!=null&&m.searchParams.set(ma,o),c&&m.searchParams.set(pa,"true");break}switch(s){case P.GET:n!=null&&m.searchParams.set(da,"true"),d&&m.searchParams.set(ca,"true"),h&&m.searchParams.set(ga,"true"),r!=null&&r.length>0&&m.searchParams.set(ua,r.join());break;case P.ADD:m.searchParams.set(Ye,"add");break;case P.REMOVE:m.searchParams.set(Ye,"remove");break;case P.DELETE:m.searchParams.set($e,"delete");break;case P.GET_QUERY_METADATA:m.searchParams.set($e,"dsMetadata");break}return m}const T={getWebContextId:Me,fetchModel:ba,ModelRequestTypes:P,endWebContext:wa,ModelError:xe};class Et{constructor(e,t,s){this.modelAndViewName=e,this.instanceId=t,this.onError=s}async getRecord(e,t,s,a,o){const{modelAndViewName:n,instanceId:r}=this;try{return await T.fetchModel({modelAndViewName:n,instanceId:r,context:e,type:T.ModelRequestTypes.GET,query:t,multiContextIds:s,countOnly:a,reserveIncludeUnavailable:o})}catch(c){this.handleError(c)}}async createRecord(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this;try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.CREATE,query:s,data:t,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(h){this.handleError(h)}}async deleteRecord(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this,h=this.wrapRecordIdsAsData(t);try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.DELETE,query:s,data:h,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(m){this.handleError(m)}}async updateRecord(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this;try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.SAVE,query:s,data:t,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(h){this.handleError(h)}}async performAction(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this,h=this.wrapRecordIdsAsData(t);try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.SAVE,query:s,data:h,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(m){this.handleError(m)}}async addRecord(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this,h=this.wrapRecordIdsAsData(t);try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.ADD,query:s,data:h,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(m){this.handleError(m)}}async removeRecord(e,t,s,a,o,n,r){const{modelAndViewName:c,instanceId:d}=this,h=this.wrapRecordIdsAsData(t);try{return await T.fetchModel({modelAndViewName:c,instanceId:d,context:e,type:T.ModelRequestTypes.REMOVE,query:s,data:h,actionGroup:o,action:n,wfParametersMap:r,refresh:a})}catch(m){this.handleError(m)}}wrapRecordIdsAsData(e){return Array.isArray(e)?e.map(t=>({_id:t})):e!=null?{_id:e}:null}async getQueryMetadata(e){const{modelAndViewName:t,instanceId:s}=this;try{return await T.fetchModel({modelAndViewName:t,instanceId:s,context:e,type:T.ModelRequestTypes.GET_QUERY_METADATA})}catch(a){this.handleError(a)}}handleError(e){throw this.onError!=null&&this.onError(e),e}}const Ca=[{header:"General",description:"Description",controls:[{id:"name",label:"Name",type:"text",placeholder:"Service Plan Name",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"requestType",label:"Request Type *",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"currency",label:"Currency *",type:"dropdown",className:"w-full md:w-2/5  mr-6",values:[{name:"Select One",key:""},{name:"USD",key:"usd"},{name:"INR",key:"inr"}]},{id:"description",label:"Description",type:"textarea",className:"w-full md:w-2/5 md:inline-block",placeholder:"Placeholder"}]},{header:"Service Level Defaults",description:"Create a Set of Service Level Rules",controls:[{id:"workType",label:"Work Type *",type:"dropdown",className:"w-full md:w-2/5  md:inline-block mr-6",values:[{name:"Select",key:""},{name:"Rule 1",key:"rule1"},{name:"Rule 2",key:"rule2"}]},{id:"serviceclass",label:"Service class *",type:"dropdown",className:"w-full md:w-2/5  md:inline-block",values:[{name:"Select",key:""},{name:"Rule A",key:"ruleA"},{name:"Rule B",key:"ruleB"}]},{id:"serviceprovider",label:"Service provider*",type:"dropdown",className:"w-full md:w-2/5  md:inline-block mr-6",values:[{name:"Select",key:""},{name:"Date Rule 1",key:"date1"},{name:"Date Rule 2",key:"date2"}]},{id:"priorityclassification",label:"Priority classification *",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select",key:""},{name:"Low",key:"Low"},{name:"Medium",key:"Medium"},{name:"High",key:"high"}]}]},{header:"Assignment Rules",description:"create a set of rules of assignments",controls:[{id:"createTask",label:"Create Task *",type:"dropdown",className:"w-full md:w-2/5 md:inline-block md:mr-8",values:[{name:"Select",key:""},{name:"Rule 1",key:"rule1"},{name:"Rule 2",key:"rule2"}]},{id:"taskassignmentrule",label:"Task assignment rule *",type:"dropdown",className:"w-full md:w-2/5 md:inline-block md:mr-8",values:[{name:"Select",key:""},{name:"Rule A",key:"ruleA"},{name:"Rule B",key:"ruleB"}]},{id:"serviceprovider",label:"Task assignment dates rule*",type:"dropdown",className:"w-full md:w-2/5 md:inline-block md:mr-8",values:[{name:"Select",key:""},{name:"Date Rule 1",key:"date1"},{name:"Date Rule 2",key:"date2"}]},{id:"taskestimaterule",label:"Task Estimate Rule*",type:"dropdown",className:"w-full md:w-2/5 md:inline-block md:mr-8",values:[{name:"Select",key:""},{name:"Low",key:"Low"},{name:"Medium",key:"Medium"},{name:"High",key:"high"}]}]}],Ra=[{controls:[{type:"calendar",label:"Respond Within",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Pick a date"},{type:"calendar",label:" Due Within",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Select Date"},{type:"calendar",label:" Follow-Up Within",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Pick a date"}]},{controls:[{type:"calendar",label:"Estimate labor time",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Pick a date"},{type:"calendar",label:" Estimate labor cost",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Select Date"},{type:"calendar",label:" Estimate material cost",className:"w-full md:w-2/5 md:inline-block md:mr-8",placeholder:"Pick a date"},{type:"calendar",label:" Rule TEstimate vendor cost",className:"w-full md:w-2/5 md:inline-block",placeholder:"Pick a date"}]}],ka=({header:l,description:e,cancelLabel:t,submitLabel:s,onCancel:a=R.noop,onSubmit:o=R.noop})=>i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center border-b border-gray-200 pb-2",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("h3",{className:"mb-2 font-semibold",children:l}),i.jsx("div",{className:"text-gray-500",children:i.jsx("span",{children:e})})]}),i.jsxs("div",{className:"mb-2 flex gap-2 md:gap-4 ",children:[i.jsx(E,{label:s,rounded:!0,className:"size-sm !rounded-lg",onClick:o}),i.jsx(E,{label:t,rounded:!0,outlined:!0,className:"size-sm !rounded-lg",onClick:a})]})]}),Pt=({index:l=0,onChange:e=O,size:t=0})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(E,{label:"Previous",icon:"pi pi-chevron-left",onClick:()=>e(--l<0?0:l),disabled:l===0,size:"small",severity:"secondary"}),i.jsx(E,{label:"Next",icon:"pi pi-chevron-right",iconPos:"right",onClick:()=>e(++l<t?l:t-1),disabled:l===t-1,size:"small",severity:"secondary"})]}),re=()=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(k,{type:"text",className:"mt-4 w-84",placeholder:"Search by Employee, Room, Job Title"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(E,{label:"Remove",icon:"pi pi-times",iconPos:"right",severity:"secondary",outlined:!0,size:"small"}),i.jsx(E,{label:"Filter",icon:"pi pi-sort-amount-down",iconPos:"right",severity:"secondary",outlined:!0,size:"small"}),i.jsx(E,{icon:"pi pi-download",text:!0,size:"small",severity:"secondary"})]})]}),Ta=({visible:l,onHide:e=R.noop,onSubmit:t=R.noop})=>i.jsx(W,{header:i.jsx(pe,{header:"Task Template",description:"Add the task template from the list"}),visible:l,position:"right",className:"h-screen w-full max-w-[64rem]",onHide:e,draggable:!1,resizable:!1,children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(k,{type:"text",className:"mt-4 w-84",placeholder:"Search by building ,floor , space ID"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(E,{label:"OK",size:"small",onClick:()=>console.log("Remove Clicked")}),i.jsx(E,{label:"Filter",icon:"pi pi-sort-amount-down",iconPos:"right",severity:"secondary",outlined:!0,size:"small",onClick:()=>console.log("Filter Clicked")}),i.jsx(E,{icon:"pi pi-download",text:!0,size:"small",severity:"secondary",onClick:()=>console.log("Download Clicked")})]})]}),i.jsxs(z,{value:me,size:"small",children:[i.jsx(S,{field:"code",header:"ID"}),i.jsx(S,{field:"name",header:"Template type"}),i.jsx(S,{field:"category",header:"Template name"}),i.jsx(S,{field:"quantity",header:"Template Description"})]})]})}),La=()=>{const[l,e]=w.useState(0),{state:t,setState:s}=w.useContext(U),[a,o]=w.useState(Ca),[n,r]=w.useState(Ra),[c,d]=w.useState(!1),h=M=>{d(M.checked)},[m,g]=w.useState(!1),[u,x]=w.useState([]),[y,f]=w.useState(!1),p=M=>{f(M.checked)},v=(M,$)=>()=>{s({...t,[M]:$})},j=M=>{const{value:$,target:jt}=M;o(Nt=>Nt.map(Be=>({...Be,controls:Be.controls.map(ve=>ve.id===jt.id?{...ve,value:$}:ve)})))},G=[{label:"General Details"},{label:"Service Level Defaults"},{label:"Assignment Rules"},{label:"Task Templates"}];return i.jsxs(ue,{header:"Service Plan",children:[i.jsx(Ce,{model:G,className:"ux-steps !bg-[#f5faff]",activeIndex:l,onSelect:M=>e(M.index),readOnly:!1}),i.jsxs(Z,{test:l,children:[i.jsx("div",{type:0,children:i.jsx(A,{formSchema:[a[0]],onChange:j,classNameFn:(M,$)=>N("mb-4 mt-8",{"border-b border-gray-200 ":$})})}),i.jsxs("div",{type:1,children:[i.jsx(A,{formSchema:[a[1]],onChange:j,classNameFn:(M,$)=>N("mb-4 mt-8",{"border-b border-gray-200 ":$})}),i.jsx("div",{className:"flex ",children:i.jsx(k,{label:"Response Time Settings",type:"checkbox",className:"flex !flex-row-reverse gap-3",values:[{key:"Rts",label:"Response Time Settings"}],onChange:p})}),y&&i.jsx("div",{className:"mt-4",children:i.jsx(A,{formSchema:[n[0]],onChange:j,classNameFn:()=>N("mb-4")})})]}),i.jsxs("div",{className:"mt-6",type:2,children:[i.jsx(A,{formSchema:[a[2]],onChange:j,classNameFn:()=>N("mb-4")}),i.jsx("div",{className:"flex",children:i.jsx(k,{label:"Estimate Settings",type:"checkbox",className:"flex !flex-row-reverse gap-3",values:[{key:"Ets",label:"Estimate Settings"}],onChange:h})}),c&&i.jsx("div",{className:"mt-4",children:i.jsx(A,{formSchema:[n[1]],onChange:j,classNameFn:()=>N("mb-4")})})]}),i.jsxs("div",{className:"mt-6",type:3,children:[i.jsx(ka,{header:"Task Template (Optional)",description:"Add task template to assign to this service plan",submitLabel:"Add Task template",cancelLabel:"Find Task template",onCancel:v("findTask",!1),onSubmit:()=>g(!0)}),i.jsx(Ta,{visible:m,onHide:()=>g(!1)}),i.jsx(re,{}),i.jsxs(z,{value:me,size:"small",selection:u,onSelectionChange:M=>x(M.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),i.jsx(S,{field:"code",header:"ID"}),i.jsx(S,{field:"name",header:"Template type"}),i.jsx(S,{field:"category",header:"Template name"}),i.jsx(S,{field:"quantity",header:"Template Description"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Pt,{index:l,onChange:e,size:G.length})})]})},Aa=[{header:"General",controls:[{id:"name",label:"Name",type:"text",placeholder:"Job Plan Name",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"description",label:"Description",type:"textarea",className:"w-full md:w-2/5 md:inline-block",placeholder:"Placeholder"},{id:"requestType",label:"Primary Location for service agreement ",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]}]},{header:"Responsible organization",controls:[{id:"serviceProvider",label:"Service provider",type:"dropdown",placeholder:"Select",className:"w-full md:w-2/5  md:inline-block mr-6",values:[{name:"Select",key:""},{name:"Rule 1",key:"rule1"},{name:"Rule 2",key:"rule2"}]}]},{header:"Service provider",description:"Small description",controls:[{id:"PrimeLocationAgreement ",label:"Primary Location for service agreement ",type:"dropdown",placeholder:"Select",className:"w-full md:w-2/5  md:inline-block mr-6",values:[{name:"Select",key:""},{name:"Rule 1",key:"rule1"},{name:"Rule 2",key:"rule2"}]}]},{header:"Resources (optional)",description:"Small description",controls:[{id:"PrimeLocationAgreement ",label:"Primary Location for service agreement ",type:"dropdown",placeholder:"Select",className:"w-full md:w-2/5  md:inline-block mr-6",values:[{name:"Select",key:""},{name:"Rule 1",key:"rule1"},{name:"Rule 2",key:"rule2"}]}]}],Ma=()=>{const[l,e]=w.useState(0),{state:t,setState:s}=w.useContext(U),[a,o]=w.useState(Aa),[n,r]=w.useState(!1),[c,d]=w.useState([]),h=g=>{const{value:u,target:x}=g;o(y=>y.map(f=>({...f,controls:f.controls.map(p=>p.id===x.id?{...p,value:u}:p)})))},m=[{label:"General Details"},{label:"Service Level Defaults"},{label:"Assignment Rules"}];return i.jsxs(ue,{header:"Job Plan",children:[i.jsx(Ce,{model:m,className:"ux-steps !bg-[#f5faff]",activeIndex:l,onSelect:g=>e(g.index),readOnly:!1}),i.jsxs(Z,{test:l,children:[i.jsx("div",{type:0,children:i.jsx(A,{formSchema:[a[0]],onChange:h,classNameFn:(g,u)=>N("mb-4 mt-8",{"border-b border-gray-200 ":u})})}),i.jsxs("div",{type:1,children:[i.jsx(A,{formSchema:[a[1]],onChange:h,classNameFn:(g,u)=>N("mb-4 mt-8",{"border-b border-gray-200 ":u})}),i.jsx(A,{formSchema:[a[2]],onChange:h,classNameFn:(g,u)=>N("mb-4 mt-8",{"border-b border-gray-200 ":u})})]}),i.jsxs("div",{className:"mt-6",type:2,children:[i.jsx(re,{}),i.jsxs(z,{value:me,size:"small",selection:c,onSelectionChange:g=>d(g.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),i.jsx(S,{field:"code",header:"ID"}),i.jsx(S,{field:"name",header:"Template type"}),i.jsx(S,{field:"category",header:"Template name"}),i.jsx(S,{field:"quantity",header:"Template Description"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Pt,{index:l,onChange:e,size:m.length})})]})},Ba=[{header:"General",description:"Small description",controls:[{id:"name",label:"Name",type:"text",placeholder:"Building ID",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"name",label:"Name",type:"text",placeholder:"Building Name",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"description",label:"Description",type:"textarea",className:"w-full md:w-2/5 md:inline-block mr-6",placeholder:"Placeholder"},{id:"requestType",label:"Parent Property",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]}]},{header:"Building Details",description:"Small description",controls:[{id:"name",label:"Legal Name",type:"text",placeholder:"Legal Name",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"name",label:"Common Name",type:"text",placeholder:"Common Name",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"name",label:"Parking Space (open)",type:"text",placeholder:"Building ID",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"name",label:"Parking Space (Covered)",type:"text",placeholder:"Parking Space (Covered)",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"Tenure",label:"Tenure",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"name",label:"Headcount",type:"text",placeholder:"Headcount",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"BuildingClass",label:"Building Class",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"name",label:"Total area occupied ",type:"text",placeholder:"Total area occupied ",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"BuildingClass",label:"Building Class",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"BuildingClass",label:"Building Class",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"BuildingClass",label:"Building Class",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"BuildingClass",label:"Building Class",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Option 1",key:"option1"},{name:"Option 2",key:"option2"}]}]},{header:"Units",description:"Small description",controls:[{id:"Currency",label:"Currency ",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"US Dollar",key:"USD"},{name:"Euro",key:"EUR"},{name:"British Pound",key:"GBP"},{name:"Japanese Yen",key:"JPY"}]},{id:"AreaUnits",label:"Area Units ",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select One",key:""},{name:"Square-feet",key:"option1"},{name:"Option 2",key:"option2"}]},{id:"AreaUnits",label:"Area Units ",type:"dropdown",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"Select One",key:""},{name:"Meter",key:"m"},{name:"Kilometer",key:"km"},{name:"Centimeter",key:"cm"},{name:"Millimeter",key:"mm"},{name:"Feet",key:"ft"}]},{id:"name",label:"Name",type:"text",placeholder:"Building ID",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"CarbonUOM",label:"Carbon calculations UOM",type:"dropdown",className:"w-full md:w-2/5 md:inline-block ",values:[{name:"Select One",key:""},{name:"Kilograms of COâ‚‚",key:"kgCO2"},{name:"Metric Tons of COâ‚‚",key:"tCO2"},{name:"Pounds of COâ‚‚",key:"lbCO2"},{name:"Grams of COâ‚‚",key:"gCO2"},{name:"Carbon Footprint Equivalent",key:"CFE"}]}]},{header:"Address & Location Details",description:"Small Description",controls:[{id:"address",label:"Address",type:"text",placeholder:"Enter Address",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"zipCode",label:"Zip/Postal Code",type:"text",placeholder:"Enter Zip Code",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"geographyLookup",label:"Geography Lookup",type:"dropdown",placeholder:"Search Location",className:"w-full md:w-2/5 md:inline-block mr-6",values:[{name:"North America/United States/Florida/Miami",key:"NA_US_FL_MIAMI"},{name:"Europe/Germany/Berlin",key:"EU_DE_BERLIN"},{name:"Asia/India/Karnataka/Bangalore",key:"AS_IN_KA_BANGALORE"}]},{id:"city",label:"City",type:"text",placeholder:"Enter City",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"state",label:"State/Province",type:"text",placeholder:"Enter State",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"country",label:"Country",type:"text",placeholder:"Enter Country",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"gisLatitude",label:"GIS Latitude",type:"text",placeholder:"Enter Latitude",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"gisLongitude",label:"GIS Longitude",type:"text",placeholder:"Enter Longitude",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"mainPhone",label:"Main Phone",type:"text",placeholder:"Add Phone",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"mainFax",label:"Main Fax",type:"text",placeholder:"Add Fax",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"inServices",label:"In Services",type:"calendar",placeholder:"Select Date",className:"w-full md:w-2/5 md:inline-block mr-6"},{id:"actualRetirement",label:"Actual Retirement",type:"calendar",placeholder:"Add Date",className:"w-full md:w-2/5 md:inline-block mr-6"}]},{header:"Maintenance Details",description:"Small description",controls:[{id:"name",label:"Maintenance Priority",type:"text",placeholder:"Maintenance Priority",className:"w-full md:w-2/5 md:inline-block mr-6"}]}],Ia=()=>{const[l,e]=w.useState(Ba),[t,s]=w.useState([]),[a,o]=w.useState("GR"),n=[{name:"General",key:"GR"},{name:"Area of Measurement",key:"AOM"},{name:"Maintenance",key:"ME"},{name:"Reserve",key:"RE"}],r=c=>{const{id:d,value:h}=c.target;e(m=>we(m,d,h))};return i.jsx(ue,{header:"Building Plan",Menu:n,onMenuSelect:o,children:i.jsxs("div",{children:[a==="GR"&&i.jsx("div",{children:i.jsxs(oe,{hidden:!1,children:[i.jsxs(I,{header:"General & Building ",children:[i.jsx(A,{formSchema:[l[0]],onChange:r,classNameFn:()=>N("mb-4")}),i.jsx(A,{formSchema:[l[1]],onChange:r,classNameFn:()=>N("mb-4")})]}),i.jsx(I,{header:"Units",children:i.jsx(A,{formSchema:[l[2]],onChange:r,classNameFn:()=>N("mb-4")})}),i.jsxs(I,{header:"Address & Contact",children:[i.jsx(A,{formSchema:[l[3]],onChange:r,classNameFn:()=>N("mb-4")}),i.jsx(re,{}),i.jsxs(z,{value:ge,size:"small",selection:t,tableStyle:{width:"50rem",fontSize:"12px"},onSelectionChange:c=>s(c.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple"}),i.jsx(S,{field:"Role",header:"Role"}),i.jsx(S,{field:"Person",header:"Person"}),i.jsx(S,{field:"Work phone",header:"Work phone"}),i.jsx(S,{field:"Fax",header:"Fax"}),i.jsx(S,{field:"Email",header:"Email"}),i.jsx(S,{field:"Primary Organization",header:"Primary Organization"})]})]})]})}),a==="AOM"&&i.jsx(oe,{children:i.jsx(I,{header:"Area of Measurement",children:i.jsx("p",{children:"Area of Measurement-related data goes here..."})})}),a==="ME"&&i.jsxs(i.Fragment,{children:[i.jsx(A,{formSchema:[l[4]],onChange:r,classNameFn:()=>N("mb-4")}),i.jsxs(oe,{children:[i.jsxs(I,{header:"PM Schedules",children:[i.jsxs(z,{value:ge,size:"small",selection:t,tableStyle:{width:"50rem",fontSize:"12px"},onSelectionChange:c=>s(c.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple"}),i.jsx(S,{field:"Role",header:"Role"}),i.jsx(S,{field:"Person",header:"Person"}),i.jsx(S,{field:"Work phone",header:"Work phone"}),i.jsx(S,{field:"Fax",header:"Fax"}),i.jsx(S,{field:"Email",header:"Email"}),i.jsx(S,{field:"Primary Organization",header:"Primary Organization"})]}),i.jsx(re,{}),i.jsxs(z,{value:ge,size:"small",selection:t,tableStyle:{width:"50rem",fontSize:"12px"},onSelectionChange:c=>s(c.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple"}),i.jsx(S,{field:"Role",header:"Role"}),i.jsx(S,{field:"Person",header:"Person"}),i.jsx(S,{field:"Work phone",header:"Work phone"}),i.jsx(S,{field:"Fax",header:"Fax"}),i.jsx(S,{field:"Email",header:"Email"}),i.jsx(S,{field:"Primary Organization",header:"Primary Organization"})]})]}),i.jsx(I,{header:"Safety Plans (procedure)",children:i.jsx("p",{children:"Safety Plans (procedure)"})}),i.jsx(I,{header:"Tasks",children:i.jsx("p",{children:"Tasks Plans"})}),i.jsx(I,{header:"Checklists",children:i.jsx("p",{children:"Checklists"})}),i.jsx(I,{header:"Available services",children:i.jsx("p",{children:"Available services"})})]})]}),a==="RE"&&i.jsxs(oe,{children:[i.jsx(I,{header:"Welcome Package links ( 01)",children:i.jsx("p",{children:"Reserve-related data goes here..."})}),i.jsxs(I,{header:"Equipments ( 01)",children:[i.jsx(re,{}),i.jsxs(z,{value:ge,size:"small",selection:t,tableStyle:{width:"50rem",fontSize:"12px"},onSelectionChange:c=>s(c.value),dataKey:"code",children:[i.jsx(S,{selectionMode:"multiple"}),i.jsx(S,{field:"Role",header:"Role"}),i.jsx(S,{field:"Person",header:"Person"}),i.jsx(S,{field:"Work phone",header:"Work phone"}),i.jsx(S,{field:"Fax",header:"Fax"}),i.jsx(S,{field:"Email",header:"Email"}),i.jsx(S,{field:"Primary Organization",header:"Primary Organization"})]})]})]})]})})};window.TriModelApi=T;window.TriModel=Et;window.appModel=new Et("qsOperationAndMaintenance","-1",console.log);console.info(`
  const jobPlan = [
  Â  { name: "RK from UX", description: "Description for UX App" },
  ];
  // To created Record try this
  appModel.createRecord("qsJobPlanData", jobPlan, null, true, "jobPlanActions", "createJobPlan").then(console.log)

  // To getRecord try this
  appModel.getRecord("qsJobPlanData/145236147").then(console.log)

  // For more info see: https://tririga.github.io/tririga-react-components
`);function Fa(){return i.jsx(Yt,{children:i.jsxs($t,{children:[i.jsx(H,{path:"/",element:i.jsx(Ue,{})}),i.jsx(H,{path:"login",element:i.jsx(Ue,{})}),i.jsxs(H,{path:"dashboard",element:i.jsx(na,{}),children:[i.jsx(H,{index:!0,element:i.jsx(us,{})}),i.jsx(H,{path:"service",element:i.jsx(Wi,{})}),i.jsx(H,{path:"moverequest",element:i.jsx(Zi,{})}),i.jsx(H,{path:"service-plan",element:i.jsx(La,{})}),i.jsx(H,{path:"job-plan",element:i.jsx(Ma,{})}),i.jsx(H,{path:"project",element:i.jsx(gs,{})}),i.jsx(H,{path:"building",element:i.jsx(Ia,{})})]})]})})}const Da=document.getElementById("ux-app");Xt.createRoot(Da).render(i.jsx(w.StrictMode,{children:i.jsx(Fa,{})}));
